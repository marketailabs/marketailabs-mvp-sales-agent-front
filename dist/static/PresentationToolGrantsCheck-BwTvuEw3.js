const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-B_5TrLcN.js","static/sanity-CTZzOIdx.js","static/LiveQueries-BpnxvMFM.js","static/DisplayedDocumentBroadcaster-DnBnw4LV.js","static/PostMessageDocuments-Dk_6bIGt.js","static/PostMessageRefreshMutations-C4QbM_bn.js","static/PostMessagePerspective-TfWGyuoQ.js","static/PostMessagePreviewSnapshots-BVE_mOwa.js","static/PostMessageSchema-BCTN4YK9.js","static/PostMessageTelemetry-Cph-UVgp.js"])))=>i.map(i=>d[i]);
import{r as f,b2 as Tt,b3 as jr,j as l,b4 as Er,b5 as Rr,b6 as Cr,b7 as Nt,b8 as Dt,b9 as Ft,ba as Vt,bb as Bt,bc as Kt,bd as Ht,be as wt,bf as yt,bg as Ne,bh as Ve,bi as xt,bj as bt,bk as Ke,bl as Pt,bm as St,X as Gt,bn as Ar,bo as qt,bp as kr,bq as Tr,a as W,br as ee,bs as Xt,bt as Mr,u as rt,bu as Qt,bv as Jt,ao as He,i as nt,k as ye,bw as xe,bx as Yt,by as Zt,bz as er,bA as Ir,bB as tr,bC as $r,O as Lr,bD as rr,n as Je,bE as ht,bF as nr,ah as Ur,bG as Or,bH as zr,F as ie,bI as Wr,l as _t,bJ as te,bK as Nr,bL as me,bM as it,bN as Dr,bO as Fr,bP as Vr,bQ as Br,bR as Kr,s as ve,bS as jt,bT as Et,bU as Hr,bV as Mt,bW as Gr,a8 as Rt,bX as qr,bY as Xr,C as de,bZ as ir,b_ as Ge,at as Ee,h as Ye,T as re,S as $e,ac as Ze,f as et,av as Re,b$ as Qr,c0 as Jr,c1 as Yr,c2 as Zr,a6 as en,o as fe,b as tn,c3 as at,c4 as rn,c5 as st,c6 as nn,I as an,G as sn,c7 as Be,c8 as ar,c9 as on,ca as cn,x as ln,cb as un,a4 as dn,cc as pn,cd as mn,ce as sr,aw as hn,cf as fn,cg as vn,ch as gn,aV as wn,t as yn,ci as xn,aB as or,cj as bn,ai as cr,aW as lr,aF as Pn,ck as Sn,cl as _n,cm as jn,cn as En,co as Rn,cp as Cn,cq as An,cr as kn}from"./sanity-CTZzOIdx.js";import{D as Tn,i as Mn}from"./DisplayedDocumentBroadcaster-DnBnw4LV.js";function In({children:r,isValidProp:e,...t}){e&&Er(e),t={...f.useContext(Tt),...t},t.isStatic=jr(()=>t.isStatic);const i=f.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return l.jsx(Tt.Provider,{value:i,children:r})}const $n={"handshake/syn":Ht,"handshake/syn-ack":Kt,"handshake/ack":Bt,"channel/response":Vt,"channel/heartbeat":Ft,"channel/disconnect":Dt,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Ln={[Ht]:"handshake/syn",[Kt]:"handshake/syn-ack",[Bt]:"handshake/ack",[Vt]:"channel/response",[Ft]:"channel/heartbeat",[Dt]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},Un=r=>{const{data:e}=r;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=Nt),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=$n[e.type]??e.type),r},On=r=>{const{channelId:e,...t}=r,i={...t,connectionId:e};return i.domain===Nt&&(i.domain="sanity/channels"),i.to==="visual-editing"&&(i.to="overlays"),i.from==="visual-editing"&&(i.from="overlays"),i.type=Ln[i.type]??i.type,i.type==="channel/response"&&i.responseTo&&!i.data&&(i.data={responseTo:i.responseTo}),(i.type==="handshake/syn"||i.type==="handshake/syn-ack"||i.type==="handshake/ack")&&(i.data={id:i.connectionId}),i},zn=({context:r},e)=>{const{sources:t,targetOrigin:i}=r,a=On(e.message);t.forEach(n=>{n.postMessage(a,{targetOrigin:i})})},ft=()=>({listen:Cr(Un),requestMachine:Rr().provide({actions:{"send message":zn}})});function Wn(r){const e=new URL(r),{searchParams:t}=e;return t.delete(wt),t.delete(yt),t.delete(Ne),t.delete(Ve),t.delete(xt),e}function Nn(r,e,t,i){const a=new URL(r),{searchParams:n}=a;return e&&(n.set(yt,e),n.set(wt,t)),n.set(Ne,i),a}function ur(){if(typeof crypto<"u"){const r=new Uint8Array(16);crypto.getRandomValues(r);let e="";for(let t=0;t<r.length;t++)e+=r[t].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Dn(r,e,t,i){const a=r.withConfig({apiVersion:bt}),n=ur(),s=a.patch(Ke).set({secret:n,studioUrl:t,userId:i});return await a.transaction().createIfNotExists({_id:Ke,_type:Pt,source:e,studioUrl:t,userId:i}).patch(s).commit({tag:St}),{secret:n}}async function Fn(r,e,t,i){const a=r.withConfig({apiVersion:bt}),n=a.patch(Ke).set({secret:null,studioUrl:t,userId:i});await a.transaction().createIfNotExists({_id:Ke,_type:Pt,source:e,studioUrl:t,userId:i}).patch(n).commit({tag:St})}function Vn(r){for(var e=[],t=0;t<r.length;){var i=r[t];if(i==="*"||i==="+"||i==="?"){e.push({type:"MODIFIER",index:t,value:r[t++]});continue}if(i==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:r[t++]});continue}if(i==="{"){e.push({type:"OPEN",index:t,value:r[t++]});continue}if(i==="}"){e.push({type:"CLOSE",index:t,value:r[t++]});continue}if(i===":"){for(var a="",n=t+1;n<r.length;){var s=r.charCodeAt(n);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){a+=r[n++];continue}break}if(!a)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:a}),t=n;continue}if(i==="("){var o=1,c="",n=t+1;if(r[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<r.length;){if(r[n]==="\\"){c+=r[n++]+r[n++];continue}if(r[n]===")"){if(o--,o===0){n++;break}}else if(r[n]==="("&&(o++,r[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));c+=r[n++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(t));if(!c)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:c}),t=n;continue}e.push({type:"CHAR",index:t,value:r[t++]})}return e.push({type:"END",index:t,value:""}),e}function Bn(r,e){e===void 0&&(e={});for(var t=Vn(r),i=e.prefixes,a=i===void 0?"./":i,n=e.delimiter,s=n===void 0?"/#?":n,o=[],c=0,u=0,m="",d=function(C){if(u<t.length&&t[u].type===C)return t[u++].value},p=function(C){var R=d(C);if(R!==void 0)return R;var E=t[u],L=E.type,I=E.index;throw new TypeError("Unexpected ".concat(L," at ").concat(I,", expected ").concat(C))},h=function(){for(var C="",R;R=d("CHAR")||d("ESCAPED_CHAR");)C+=R;return C},x=function(C){for(var R=0,E=s;R<E.length;R++){var L=E[R];if(C.indexOf(L)>-1)return!0}return!1},w=function(C){var R=o[o.length-1],E=C||(R&&typeof R=="string"?R:"");if(R&&!E)throw new TypeError('Must have text between two parameters, missing text after "'.concat(R.name,'"'));return!E||x(E)?"[^".concat(Me(s),"]+?"):"(?:(?!".concat(Me(E),")[^").concat(Me(s),"])+?")};u<t.length;){var v=d("CHAR"),g=d("NAME"),P=d("PATTERN");if(g||P){var S=v||"";a.indexOf(S)===-1&&(m+=S,S=""),m&&(o.push(m),m=""),o.push({name:g||c++,prefix:S,suffix:"",pattern:P||w(S),modifier:d("MODIFIER")||""});continue}var y=v||d("ESCAPED_CHAR");if(y){m+=y;continue}m&&(o.push(m),m="");var b=d("OPEN");if(b){var S=h(),_=d("NAME")||"",A=d("PATTERN")||"",j=h();p("CLOSE"),o.push({name:_||(A?c++:""),pattern:_&&!A?w(S):A,prefix:S,suffix:j,modifier:d("MODIFIER")||""});continue}p("END")}return o}function Kn(r,e){var t=[],i=pr(r,t,e);return Hn(i,t,e)}function Hn(r,e,t){t===void 0&&(t={});var i=t.decode,a=i===void 0?function(n){return n}:i;return function(n){var s=r.exec(n);if(!s)return!1;for(var o=s[0],c=s.index,u=Object.create(null),m=function(p){if(s[p]===void 0)return"continue";var h=e[p-1];h.modifier==="*"||h.modifier==="+"?u[h.name]=s[p].split(h.prefix+h.suffix).map(function(x){return a(x,h)}):u[h.name]=a(s[p],h)},d=1;d<s.length;d++)m(d);return{path:o,index:c,params:u}}}function Me(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function dr(r){return r&&r.sensitive?"":"i"}function Gn(r,e){if(!e)return r;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,a=t.exec(r.source);a;)e.push({name:a[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),a=t.exec(r.source);return r}function qn(r,e,t){var i=r.map(function(a){return pr(a,e,t).source});return new RegExp("(?:".concat(i.join("|"),")"),dr(t))}function Xn(r,e,t){return Qn(Bn(r,t),e,t)}function Qn(r,e,t){t===void 0&&(t={});for(var i=t.strict,a=i===void 0?!1:i,n=t.start,s=n===void 0?!0:n,o=t.end,c=o===void 0?!0:o,u=t.encode,m=u===void 0?function(R){return R}:u,d=t.delimiter,p=d===void 0?"/#?":d,h=t.endsWith,x=h===void 0?"":h,w="[".concat(Me(x),"]|$"),v="[".concat(Me(p),"]"),g=s?"^":"",P=0,S=r;P<S.length;P++){var y=S[P];if(typeof y=="string")g+=Me(m(y));else{var b=Me(m(y.prefix)),_=Me(m(y.suffix));if(y.pattern)if(e&&e.push(y),b||_)if(y.modifier==="+"||y.modifier==="*"){var A=y.modifier==="*"?"?":"";g+="(?:".concat(b,"((?:").concat(y.pattern,")(?:").concat(_).concat(b,"(?:").concat(y.pattern,"))*)").concat(_,")").concat(A)}else g+="(?:".concat(b,"(").concat(y.pattern,")").concat(_,")").concat(y.modifier);else{if(y.modifier==="+"||y.modifier==="*")throw new TypeError('Can not repeat "'.concat(y.name,'" without a prefix and suffix'));g+="(".concat(y.pattern,")").concat(y.modifier)}else g+="(?:".concat(b).concat(_,")").concat(y.modifier)}}if(c)a||(g+="".concat(v,"?")),g+=t.endsWith?"(?=".concat(w,")"):"$";else{var j=r[r.length-1],C=typeof j=="string"?v.indexOf(j[j.length-1])>-1:j===void 0;a||(g+="(?:".concat(v,"(?=").concat(w,"))?")),C||(g+="(?=".concat(v,"|").concat(w,")"))}return new RegExp(g,dr(t))}function pr(r,e,t){return r instanceof RegExp?Gn(r,e):Array.isArray(r)?qn(r,e,t):Xn(r,e,t)}async function Jn(r,e,t,i,a=Gt()){const n=r.withConfig({apiVersion:bt});try{const s=new Date(Date.now()+1e3*Ar),o=`drafts.${a}`,c=ur(),u=n.patch(o).set({secret:c,source:e,studioUrl:t,userId:i});return await n.transaction().createOrReplace({_id:o,_type:qt}).patch(u).commit({tag:St}),{secret:c,expiresAt:s}}finally{try{await n.delete({query:kr})}catch(s){console.error("Failed to delete expired secrets",s)}}}function Yn(r,e){let t=new AbortController,i=[];async function a(s,o){const{result:c,syncTags:u}=await r.fetch(Tr,{},{filterResponse:!1,lastLiveEventId:s,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(u)&&(i=u),o.aborted||e(c)}const n=r.live.events().subscribe({next:s=>{s.type==="message"&&(t.abort(),t=new AbortController,s.tags.some(o=>i.includes(o))&&a(s.id,t.signal))},error:s=>console.error(s)});return a(null,t.signal),()=>{n.unsubscribe(),t.abort()}}const Zn=r=>{const e=W.c(3),{comlink:t}=r;let i,a;return e[0]!==t?(i=()=>t.on("visual-editing/features",ti),a=[t],e[0]=t,e[1]=i,e[2]=a):(i=e[1],a=e[2]),f.useEffect(i,a),null};var ei=f.memo(Zn);function ti(){return{features:{optimistic:!0}}}const ri=Yt({actions:{},actors:{},guards:{}}).createMachine({id:"Presentation Tool",context:{url:null,error:null,visualEditingOverlaysEnabled:!1},on:{"iframe reload":{actions:te({url:null}),target:".loading"}},states:{error:{description:"Failed to load, either because of a misconfiguration, a network error, or an unexpected error",tags:["error"]},loading:{on:{"iframe loaded":{target:"loaded"}},tags:["busy"]},loaded:{on:{"toggle visual editing overlays":{actions:te({visualEditingOverlaysEnabled:({event:r})=>r.enabled})},"iframe refresh":{target:".refreshing"},"iframe reload":{target:".reloading"}},states:{idle:{},refreshing:{on:{"iframe loaded":{target:"idle"}},tags:["busy"]},reloading:{on:{"iframe loaded":{target:"idle"}},tags:["busy"]}},initial:"idle"}},initial:"loading"}),ni=function(r){const e=W.c(14),{comlink:t,children:i}=r;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={},e[0]=a):a=e[0];const n=f.useRef(a);let s,o;e[1]!==t?(s=()=>t==null?void 0:t.on("visual-editing/shared-state",()=>({state:n.current})),o=[t],e[1]=t,e[2]=s,e[3]=o):(s=e[2],o=e[3]),f.useEffect(s,o);let c;e[4]!==t?(c=(v,g)=>{n.current[v]=g,t==null||t.post("presentation/shared-state",{key:v,value:g})},e[4]=t,e[5]=c):c=e[5];const u=c;let m;e[6]!==t?(m=v=>{t==null||t.post("presentation/shared-state",{key:v}),delete n.current[v]},e[6]=t,e[7]=m):m=e[7];const d=m;let p,h;e[8]!==d||e[9]!==u?(h={removeValue:d,setValue:u},e[8]=d,e[9]=u,e[10]=h):h=e[10],p=h;const x=p;let w;return e[11]!==i||e[12]!==x?(w=l.jsx(Kr.Provider,{value:x,children:i}),e[11]=i,e[12]=x,e[13]=w):w=e[13],w},ii=ve.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Ct=function(r){const e=W.c(15),{children:t,defaultSize:i,id:a,minWidth:n,maxWidth:s,order:o}=r,c=i===void 0?null:i,u=o===void 0?0:o,m=f.useContext(jt);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:p,unregisterElement:h}=m;let x;e[0]!==d||e[1]!==a?(x=d(a),e[0]=d,e[1]=a,e[2]=x):x=e[2];const w=x;let v,g;e[3]!==c||e[4]!==a||e[5]!==s||e[6]!==n||e[7]!==u||e[8]!==p||e[9]!==h?(v=()=>(p(a,{id:a,type:"panel",defaultSize:c,maxWidth:s??null,minWidth:n??0,order:u}),()=>{h(a)}),g=[a,c,u,s,n,p,h],e[3]=c,e[4]=a,e[5]=s,e[6]=n,e[7]=u,e[8]=p,e[9]=h,e[10]=v,e[11]=g):(v=e[10],g=e[11]),f.useLayoutEffect(v,g);let P;return e[12]!==t||e[13]!==w?(P=l.jsx(ii,{style:w,children:t}),e[12]=t,e[13]=w,e[14]=P):P=e[14],P};function mr(r,e){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{r.apply(r,i)},e)}}const hr="presentation/panels",fr=()=>JSON.parse(localStorage.getItem(hr)||"{}"),ai=r=>{localStorage.setItem(hr,JSON.stringify(r))},vr=r=>r.map(e=>[e.id,e.order].join(":")).join(",");function si(){const r=W.c(1);let e;const t=ci,i=oi;let a;if(r[0]===Symbol.for("react.memo_cache_sentinel")){const n=mr(i,100);a={get:t,set:i,setDebounced:n},r[0]=a}else a=r[0];return e=a,e}function oi(r,e){const t=fr(),i=vr(r),a={...t,[i]:e};ai(a)}function ci(r){const e=fr(),t=vr(r);return Array.isArray(e[t])&&e[t].some(li)?void 0:e[t]}function li(r){return r===null}function vt(r,e,t){const{maxWidth:i,minWidth:a}=r,n=i==null?100:i/t*100,s=a/t*100;return Math.min(n,Math.max(s,e))}function ui(r,e,t,i,a,n){const{panels:s,widths:o}=a,{widths:c}=n,u=c||o,m=[...u];{const x=r<0?i:t,w=s.findIndex(P=>P.id===x.id),v=u[w],g=vt(x,v+Math.abs(r),e);if(v===g)return u;r=r<0?v-g:g-v}let d=0,p=r<0?t:i,h=s.findIndex(x=>x.id===p.id);for(;;){const x=s[h],w=u[h],v=Math.abs(r)-Math.abs(d),g=vt(x,w-v,e);if(w!==g&&(d+=w-g,m[h]=g,d.toPrecision(10).localeCompare(Math.abs(r).toPrecision(10),void 0,{numeric:!0})>=0))break;if(r<0){if(--h<0)break}else if(++h>=s.length)break}return d===0?u:(p=r<0?i:t,h=s.findIndex(x=>x.id===p.id),m[h]=u[h]+d,m)}function di(r,e,t){if(r.length===1)return"100";const i=r.findIndex(n=>n.id===e),a=t[i];return a==null?"0":a.toPrecision(10)}function It(r,e,t=0,i=null){const a=r.clientX,n=(i||e.getBoundingClientRect()).left;return a-n-t}function lt(r){return r.type==="panel"}function $t(r){return r.type==="resizer"}function Lt(r){return Array.from(r.values()).sort(({order:e},{order:t})=>e==null&&t==null?0:e==null?-1:t==null?1:e-t)}function Ut(r,e,t){const i=e.reduce((s,o)=>s+o,0),a=[...e].map(s=>s/i*100);let n=0;for(let s=0;s<r.length;s++){const o=r[s],c=a[s],u=vt(o,c,t);c!=u&&(n+=c-u,a[s]=u)}if(n.toFixed(3)!=="0.000")for(let s=0;s<r.length;s++){const o=r[s];let{maxWidth:c,minWidth:u}=o;u=u/t*100,c!=null&&(c=c/t*100);const m=Math.min(c??100,Math.max(u,a[s]+n));if(m!==a[s]&&(n-=m-a[s],a[s]=m,Math.abs(n).toFixed(3)==="0.000"))break}return a}function pi(r){let e=r.length,t=100;const i=r.map(n=>n.defaultSize?(t-=n.defaultSize,e-=1,n.defaultSize):null),a=t/e;return i.map(n=>n===null?a:n)}const mi=ve.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,hi=function(r){const e=W.c(46),{children:t}=r,i=f.useRef(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Map,e[0]=a):a=e[0];const[n,s]=f.useState(a);let o,c;e[1]!==n?(c=Lt(n).filter(lt),e[1]=n,e[2]=c):c=e[2],o=c;const u=o;let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[3]=m):m=e[3];const[d,p]=f.useState(m),[h,x]=f.useState(null);let w;e[4]!==n||e[5]!==u||e[6]!==d?(w={elements:n,panels:u,widths:d},e[4]=n,e[5]=u,e[6]=d,e[7]=w):w=e[7];const v=f.useRef(w);let g;e[8]!==h||e[9]!==u||e[10]!==d?(g=F=>({flexGrow:di(u,F,d),pointerEvents:h===null?void 0:"none"}),e[8]=h,e[9]=u,e[10]=d,e[11]=g):g=e[11];const P=g;let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=(F,K)=>{s(H=>{if(H.has(F))return H;const Q=new Map(H);return Q.set(F,K),Q})},e[12]=S):S=e[12];const y=S;let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=F=>{s(K=>{if(!K.has(F))return K;const H=new Map(K);return H.delete(F),H})},e[13]=b):b=e[13];const _=b;let A;e[14]===Symbol.for("react.memo_cache_sentinel")?(A={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=A):A=e[14];const j=f.useRef(A);let C;e[15]!==n?(C=(F,K)=>{const H=Lt(n),Q=H.findIndex(D=>D.id===F),$=n.get(F);if(!$||!$t($))return;const V=$.el.current;V&&(j.current={resizerIndex:Q,panelBefore:H.reduce((D,Z,ce)=>lt(Z)&&ce<Q?Z:D,null),panelAfter:H.reduce((D,Z,ce)=>D===null&&lt(Z)&&ce>Q?Z:D,null),containerWidth:window.innerWidth,startX:K.pageX,dragOffset:It(K,V),resizerRect:V.getBoundingClientRect(),widths:v.current.widths},x(F))},e[15]=n,e[16]=C):C=e[16];const R=C;let E;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{x(null)},e[17]=E):E=e[17];const L=E;let I;e[18]!==n?(I=(F,K)=>{K.preventDefault(),K.stopPropagation();const{containerWidth:H,dragOffset:Q,panelBefore:$,panelAfter:V,resizerRect:D}=j.current;if($==null||V==null)return;const Z=n.get(F);if(!Z||!$t(Z))return;const ce=Z.el.current;if(!ce)return;const pe=It(K,ce,Q,D);if(pe===0)return;const{widths:Ce}=v.current,be=i.current.getBoundingClientRect(),Pe=pe/be.width*100,he=ui(Pe,H,$,V,v.current,j.current);Ce.some((Se,ge)=>Se!==he[ge])&&p(he)},e[18]=n,e[19]=I):I=e[19];const k=I;let T,z;e[20]!==n||e[21]!==u||e[22]!==d?(T=()=>{v.current.elements=n,v.current.panels=u,v.current.widths=d},z=[n,u,d],e[20]=n,e[21]=u,e[22]=d,e[23]=T,e[24]=z):(T=e[23],z=e[24]),f.useLayoutEffect(T,z);const N=si();let B,X;e[25]!==u||e[26]!==N?(B=()=>{const{widths:F}=v.current;if(F.length===u.length)return;const K=N.get(u);if(K){const Q=Ut(u,K,window.innerWidth);p(Q);return}const H=pi(u);p(H)},X=[N,u],e[25]=u,e[26]=N,e[27]=B,e[28]=X):(B=e[27],X=e[28]),f.useLayoutEffect(B,X);let ae,G;e[29]!==u||e[30]!==N||e[31]!==d?(ae=()=>{d.length&&N.setDebounced(u,d)},G=[N,u,d],e[29]=u,e[30]=N,e[31]=d,e[32]=ae,e[33]=G):(ae=e[32],G=e[33]),f.useEffect(ae,G);let q,le;e[34]===Symbol.for("react.memo_cache_sentinel")?(q=()=>{const F=new ResizeObserver(()=>{const{panels:K,widths:H}=v.current,Q=Ut(K,H,window.innerWidth);H.some(($,V)=>$!==Q[V])&&p(Q)});return F.observe(i.current),()=>{F.disconnect()}},le=[],e[34]=q,e[35]=le):(q=e[34],le=e[35]),f.useLayoutEffect(q,le);let J,ne;e[36]!==h||e[37]!==k||e[38]!==P||e[39]!==R?(ne={activeResizer:h,drag:k,getPanelStyle:P,registerElement:y,startDragging:R,stopDragging:L,unregisterElement:_},e[36]=h,e[37]=k,e[38]=P,e[39]=R,e[40]=ne):ne=e[40],J=ne;const se=J;let Y;e[41]!==t?(Y=l.jsx(mi,{ref:i,children:t}),e[41]=t,e[42]=Y):Y=e[42];let oe;return e[43]!==se||e[44]!==Y?(oe=l.jsx(jt.Provider,{value:se,children:Y}),e[43]=se,e[44]=Y,e[45]=oe):oe=e[45],oe};function At(r){const e=W.c(37);let t,i,a,n,s;e[0]!==r?({children:t,message:i,onRetry:n,onContinueAnyway:a,...s}=r,e[0]=r,e[1]=t,e[2]=i,e[3]=a,e[4]=n,e[5]=s):(t=e[1],i=e[2],a=e[3],n=e[4],s=e[5]);const{t:o}=ye(xe);let c;e[6]!==o?(c=o("error-card.retry-button.text"),e[6]=o,e[7]=c):c=e[7];let u;e[8]!==n||e[9]!==c?(u=l.jsx(Ee,{mode:"ghost",onClick:n,text:c}),e[8]=n,e[9]=c,e[10]=u):u=e[10];const m=u;let d;e[11]!==o?(d=o("error-card.continue-button.text"),e[11]=o,e[12]=d):d=e[12];let p;e[13]!==a||e[14]!==d?(p=l.jsx(Ee,{mode:"ghost",tone:"critical",onClick:a,text:d}),e[13]=a,e[14]=d,e[15]=p):p=e[15];const h=p;let x;e[16]!==o?(x=o("error-card.title"),e[16]=o,e[17]=x):x=e[17];let w;e[18]!==x?(w=l.jsx(re,{size:1,weight:"semibold",children:x}),e[18]=x,e[19]=w):w=e[19];let v;e[20]!==i?(v=l.jsx(re,{muted:!0,size:1,children:i}),e[20]=i,e[21]=v):v=e[21];let g;e[22]!==w||e[23]!==v?(g=l.jsxs($e,{space:3,children:[w,v]}),e[22]=w,e[23]=v,e[24]=g):g=e[24];let P;e[25]!==h||e[26]!==a||e[27]!==n||e[28]!==m?(P=n&&a?l.jsxs(en,{space:2,children:[m,h]}):n?l.jsx(fe,{children:m}):a?l.jsx(fe,{children:h}):null,e[25]=h,e[26]=a,e[27]=n,e[28]=m,e[29]=P):P=e[29];let S;e[30]!==t||e[31]!==g||e[32]!==P?(S=l.jsx(ie,{align:"center",height:"fill",justify:"center",children:l.jsx(tn,{padding:4,sizing:"border",width:0,children:l.jsxs($e,{space:4,children:[g,t,P]})})}),e[30]=t,e[31]=g,e[32]=P,e[33]=S):S=e[33];let y;return e[34]!==s||e[35]!==S?(y=l.jsx(de,{height:"fill",...s,children:S}),e[34]=s,e[35]=S,e[36]=y):y=e[36],y}function fi(r={}){const e=Object.entries(r).map(([t,i])=>`${t}=${i}`).join("&");return e.length?`?${e}`:""}function vi(r){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],t=Object.entries(r).filter(([i])=>e.includes(i)).reduce((i,[a,n])=>n==null?i:{...i,[a]:n},{});return fi(t)}const gi=f.forwardRef(function(r,e){const t=W.c(11);let i,a;t[0]!==r?({searchParams:a,...i}=r,t[0]=r,t[1]=i,t[2]=a):(i=t[1],a=t[2]);let n;t[3]!==a?(n=Object.entries(a),t[3]=a,t[4]=n):n=t[4];let s;t[5]!==n?(s={type:void 0,_searchParams:n},t[5]=n,t[6]=s):s=t[6];let o;return t[7]!==e||t[8]!==i||t[9]!==s?(o=l.jsx(at,{...i,ref:e,state:s,title:void 0}),t[7]=e,t[8]=i,t[9]=s,t[10]=o):o=t[10],o}),wi=f.forwardRef(function(r,e){const t=W.c(15);let i,a,n,s;if(t[0]!==r){const{documentId:m,documentType:d,parentRefPath:p,template:h,searchParams:x,...w}=r;i=m,a=d,s=x,n=w,t[0]=r,t[1]=i,t[2]=a,t[3]=n,t[4]=s}else i=t[1],a=t[2],n=t[3],s=t[4];let o;t[5]!==s?(o=Object.entries(s),t[5]=s,t[6]=o):o=t[6];let c;t[7]!==i||t[8]!==a||t[9]!==o?(c={id:i,type:a,_searchParams:o},t[7]=i,t[8]=a,t[9]=o,t[10]=c):c=t[10];let u;return t[11]!==e||t[12]!==n||t[13]!==c?(u=l.jsx(at,{...n,ref:e,state:c,title:void 0}),t[11]=e,t[12]=n,t[13]=c,t[14]=u):u=t[14],u});function gr(r){const e=W.c(26),{children:t,onStructureParams:i,structureParams:a,searchParams:n,refs:s}=r,{state:o,resolvePathFromState:c}=He();let u;e[0]!==o._searchParams?(u=Object.fromEntries(o._searchParams||[]),e[0]=o._searchParams,e[1]=u):u=e[1];const m=tr(u);let d;e[2]!==c||e[3]!==m||e[4]!==o?(d=j=>{const C=c(o),R=vi({...m,...j});return`${C}${R}`},e[2]=c,e[3]=m,e[4]=o,e[5]=d):d=e[5];const p=d;let h,x;e[6]===Symbol.for("react.memo_cache_sentinel")?(x={},e[6]=x):x=e[6];const w=a;let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[7]=v):v=e[7];let g;e[8]!==s||e[9]!==n?(g=j=>{const{childId:C,...R}=j,E=s==null?void 0:s.find(L=>L._id===C||it(L._id)===C);return E?l.jsx(at,{...R,state:{id:C,type:E._type,_searchParams:Object.entries(n)}}):l.jsx("div",{...R})},e[8]=s,e[9]=n,e[10]=g):g=e[10];let P,S;e[11]!==n?(P=j=>l.jsx(gi,{...j,searchParams:n}),S=j=>l.jsx(wi,{...j,searchParams:n}),e[11]=n,e[12]=P,e[13]=S):(P=e[12],S=e[13]);let y;e[14]!==i?(y=j=>{i({...j,inspect:j.inspect??void 0})},e[14]=i,e[15]=y):y=e[15];let b;e[16]!==p||e[17]!==w||e[18]!==g||e[19]!==P||e[20]!==S||e[21]!==y?(b={index:0,groupIndex:0,siblingIndex:0,payload:x,params:w,hasGroupSiblings:!1,groupLength:1,routerPanesState:v,ChildLink:g,BackLink:P,ReferenceChildLink:S,ParameterizedLink:Ri,closeCurrentAndAfter:Ei,handleEditReference:ji,replaceCurrent:_i,closeCurrent:Si,duplicateCurrent:Pi,setView:bi,setParams:y,setPayload:xi,navigateIntent:yi,createPathWithParams:p},e[16]=p,e[17]=w,e[18]=g,e[19]=P,e[20]=S,e[21]=y,e[22]=b):b=e[22],h=b;const _=h;let A;return e[23]!==t||e[24]!==_?(A=l.jsx(Pn.Provider,{value:_,children:t}),e[23]=t,e[24]=_,e[25]=A):A=e[25],A}function yi(r,e,t){console.warn("navigateIntent",r,e,t)}function xi(r){console.warn("setPayload",r)}function bi(r){console.warn("setView",r)}function Pi(r){console.warn("duplicateCurrent",r)}function Si(){console.warn("closeCurrent")}function _i(r){console.warn("replaceCurrent",r)}function ji(r){console.warn("handleEditReference",r)}function Ei(){console.warn("closeCurrentAndAfter")}function Ri(){throw new Error("ParameterizedLink not implemented")}const Ci=ve(lr)`
  height: 100%;
`,Ai=ve(ie)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,ki=ve(et)`
  white-space: pre-wrap;
`;function Ti(r){var C,R,E,L;const e=W.c(33),{mainDocumentState:t,onStructureParams:i,searchParams:a,refs:n}=r,{t:s}=ye(xe),{devMode:o}=Et();let c,u;if(e[0]!==((C=t==null?void 0:t.document)==null?void 0:C._id)||e[1]!==n){let I;e[3]!==((R=t==null?void 0:t.document)==null?void 0:R._id)?(I=k=>{var T;return it(k._id)!==((T=t==null?void 0:t.document)==null?void 0:T._id)},e[3]=(E=t==null?void 0:t.document)==null?void 0:E._id,e[4]=I):I=e[4],u=n.filter(I).map(Ii),e[0]=(L=t==null?void 0:t.document)==null?void 0:L._id,e[1]=n,e[2]=u}else u=e[2];c=u;const m=c;let d,p;e[5]!==m?(p={filter:"_id in $ids",params:{ids:m}},e[5]=m,e[6]=p):p=e[6];let h;e[7]!==s?(h=s("document-list-pane.document-list.title"),e[7]=s,e[8]=h):h=e[8];let x;e[9]!==p||e[10]!==h?(x={id:"$root",options:p,schemaTypeName:"",title:h,type:"documentList"},e[9]=p,e[10]=h,e[11]=x):x=e[11],d=x;const w=d,[v,g]=f.useState(null);let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=()=>g(null),e[12]=P):P=e[12];const S=P,[y]=f.useState(Mi);let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=()=>g(null),e[13]=b):b=e[13];let _;if(e[14]!==n?(_=[n],e[14]=n,e[15]=_):_=e[15],f.useEffect(b,_),v){let I;e[16]!==s?(I=s("document-list-pane.error.text"),e[16]=s,e[17]=I):I=e[17];let k;e[18]!==o||e[19]!==v||e[20]!==s?(k=o&&l.jsx(de,{overflow:"auto",padding:3,radius:2,tone:"critical",children:l.jsxs($e,{space:3,children:[l.jsx(Ze,{muted:!0,size:0,children:s("presentation-error.label")}),l.jsx(ki,{size:1,children:v.error.message})]})}),e[18]=o,e[19]=v,e[20]=s,e[21]=k):k=e[21];let T;return e[22]!==k||e[23]!==I?(T=l.jsx(At,{flex:1,message:I,onRetry:S,children:k}),e[22]=k,e[23]=I,e[24]=T):T=e[24],T}let A;e[25]!==w?(A=l.jsx(Ai,{direction:"column",flex:1,children:l.jsx(kn,{index:0,itemId:"$root",pane:w,paneKey:"$root"})}),e[25]=w,e[26]=A):A=e[26];let j;return e[27]!==i||e[28]!==n||e[29]!==a||e[30]!==y||e[31]!==A?(j=l.jsx(cr,{onCatch:g,children:l.jsx(Ci,{children:l.jsx(or,{children:l.jsx(gr,{onStructureParams:i,structureParams:y,searchParams:a,refs:n,children:A})})})}),e[27]=i,e[28]=n,e[29]=a,e[30]=y,e[31]=A,e[32]=j):j=e[32],j}function Mi(){return{}}function Ii(r){return it(r._id)}const $i=ve(et)`
  white-space: pre-wrap;
`;function Li(r){const e=W.c(35),{documentId:t,documentType:i,onFocusPath:a,onStructureParams:n,searchParams:s,structureParams:o}=r,{template:c,templateParams:u}=o,{t:m}=ye(xe),{devMode:d}=Et();let p,h;e[0]!==u?(h=bn(u),e[0]=u,e[1]=h):h=e[1];let x;e[2]!==t||e[3]!==i||e[4]!==h||e[5]!==c?(x={id:t,type:i,template:c,templateParameters:h},e[2]=t,e[3]=i,e[4]=h,e[5]=c,e[6]=x):x=e[6];let w;e[7]!==t||e[8]!==x?(w={id:t,options:x,title:"",type:"document"},e[7]=t,e[8]=x,e[9]=w):w=e[9],p=w;const v=p,[g,P]=f.useState(null);let S;e[10]===Symbol.for("react.memo_cache_sentinel")?(S=()=>P(null),e[10]=S):S=e[10];const y=S;let b;e[11]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{P(null)},e[11]=b):b=e[11];let _;if(e[12]!==t||e[13]!==i||e[14]!==o?(_=[t,i,o],e[12]=t,e[13]=i,e[14]=o,e[15]=_):_=e[15],f.useEffect(b,_),g){let E;e[16]!==m?(E=m("document-pane.error.text"),e[16]=m,e[17]=E):E=e[17];let L;e[18]!==d||e[19]!==g||e[20]!==m?(L=d&&l.jsx(de,{overflow:"auto",padding:3,radius:2,tone:"critical",children:l.jsxs($e,{space:3,children:[l.jsx(Ze,{muted:!0,size:0,children:m("presentation-error.label")}),l.jsx($i,{size:1,children:g.error.message})]})}),e[18]=d,e[19]=g,e[20]=m,e[21]=L):L=e[21];let I;return e[22]!==E||e[23]!==L?(I=l.jsx(At,{flex:1,message:E,onRetry:y,children:L}),e[22]=E,e[23]=L,e[24]=I):I=e[24],I}let A;e[25]===Symbol.for("react.memo_cache_sentinel")?(A={height:"100%"},e[25]=A):A=e[25];let j;e[26]===Symbol.for("react.memo_cache_sentinel")?(j=l.jsx(Xt,{}),e[26]=j):j=e[26];let C;e[27]!==a||e[28]!==v?(C=l.jsx(f.Suspense,{fallback:j,children:l.jsx(Sn,{paneKey:"document",index:1,itemId:"document",pane:v,onFocusPath:a})}),e[27]=a,e[28]=v,e[29]=C):C=e[29];let R;return e[30]!==n||e[31]!==s||e[32]!==o||e[33]!==C?(R=l.jsx(cr,{onCatch:P,children:l.jsx(lr,{style:A,children:l.jsx(gr,{searchParams:s,onStructureParams:n,structureParams:o,children:C})})}),e[30]=n,e[31]=s,e[32]=o,e[33]=C,e[34]=R):R=e[34],R}function Ui(r){const e=W.c(7),{documentId:t,documentType:i,onFocusPath:a,onStructureParams:n,searchParams:s,structureParams:o}=r;let c;return e[0]!==t||e[1]!==i||e[2]!==a||e[3]!==n||e[4]!==s||e[5]!==o?(c=l.jsx(or,{children:l.jsx(Li,{documentId:t,documentType:i,onFocusPath:a,onStructureParams:n,searchParams:s,structureParams:o})}),e[0]=t,e[1]=i,e[2]=a,e[3]=n,e[4]=s,e[5]=o,e[6]=c):c=e[6],c}function Oi(r,e){const t=W.c(7),i=xn();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={},t[0]=a):a=t[0];const[n,s]=f.useState(a),{perspectiveStack:o}=_t();let c,u;return t[1]!==r||t[2]!==i||t[3]!==o||t[4]!==e?(c=()=>{if(!e)return;const m=_n(i,e,r,o).subscribe(d=>{s(d)});return()=>{m==null||m.unsubscribe()}},u=[i,e,r,o],t[1]=r,t[2]=i,t[3]=o,t[4]=e,t[5]=c,t[6]=u):(c=t[5],u=t[6]),f.useEffect(c,u),n}function zi(r){var A,j,C,R,E,L,I,k;const e=W.c(38),{documentId:t,documentType:i,mainDocumentState:a,onFocusPath:n,onStructureParams:s,refs:o,searchParams:c,structureParams:u}=r,{t:m}=ye(xe),d=hn();let p;e[0]!==((A=a==null?void 0:a.document)==null?void 0:A._id)||e[1]!==((j=a==null?void 0:a.document)==null?void 0:j._type)||e[2]!==c?(p=T=>{var z,N;return l.jsx(at,{...T,state:{id:(z=a==null?void 0:a.document)==null?void 0:z._id,type:(N=a==null?void 0:a.document)==null?void 0:N._type,_searchParams:Object.entries(c)}})},e[0]=(C=a==null?void 0:a.document)==null?void 0:C._id,e[1]=(R=a==null?void 0:a.document)==null?void 0:R._type,e[2]=c,e[3]=p):p=e[3];const h=p;let x,w;e[4]!==((E=a==null?void 0:a.document)==null?void 0:E._type)||e[5]!==d?(w=d.get(((L=a==null?void 0:a.document)==null?void 0:L._type)||"shoe"),e[4]=(I=a==null?void 0:a.document)==null?void 0:I._type,e[5]=d,e[6]=w):w=e[6],x=w;const v=x,g=Oi(((k=a==null?void 0:a.document)==null?void 0:k._id)||"",v);let P;e:{if(!(a!=null&&a.document)){P=null;break e}let T;e[7]!==a.document||e[8]!==g.snapshot?(T=fn({snapshot:g.snapshot,fallback:a.document}),e[7]=a.document,e[8]=g.snapshot,e[9]=T):T=e[9];let z;e[10]!==m?(z=m("main-document.label"),e[10]=m,e[11]=z):z=e[11];let N;e[12]!==z?(N=l.jsx(de,{padding:1,radius:2,shadow:1,children:l.jsx(re,{muted:!0,size:0,weight:"medium",children:z})}),e[12]=z,e[13]=N):N=e[13];let B;e[14]!==v||e[15]!==T||e[16]!==N?(B=l.jsx(vn,{...T,schemaType:v,status:N}),e[14]=v,e[15]=T,e[16]=N,e[17]=B):B=e[17],P=B}const S=P;if(t&&i){let T;return e[18]!==t||e[19]!==i||e[20]!==n||e[21]!==s||e[22]!==c||e[23]!==u?(T=l.jsx(Ui,{documentId:t,documentType:i,onFocusPath:n,onStructureParams:s,searchParams:c,structureParams:u}),e[18]=t,e[19]=i,e[20]=n,e[21]=s,e[22]=c,e[23]=u,e[24]=T):T=e[24],T}let y;e[25]!==h||e[26]!==a||e[27]!==S||e[28]!==m?(y=a&&l.jsx(de,{padding:3,tone:a.document?"inherit":"caution",children:a.document?l.jsx(gn,{__unstable_focusRing:!0,as:h,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:S}):l.jsx(de,{padding:2,radius:2,tone:"inherit",children:l.jsxs(ie,{gap:3,children:[l.jsx(fe,{flex:"none",children:l.jsx(re,{size:1,children:l.jsx(wn,{})})}),l.jsx(fe,{flex:1,children:l.jsx(re,{size:1,children:l.jsx(Rt,{t:m,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:a.path}})})})]})})}),e[25]=h,e[26]=a,e[27]=S,e[28]=m,e[29]=y):y=e[29];let b;e[30]!==a||e[31]!==s||e[32]!==o||e[33]!==c?(b=l.jsx(Ti,{mainDocumentState:a,onStructureParams:s,searchParams:c,refs:o}),e[30]=a,e[31]=s,e[32]=o,e[33]=c,e[34]=b):b=e[34];let _;return e[35]!==y||e[36]!==b?(_=l.jsxs(ie,{direction:"column",flex:1,height:"fill",children:[y,b]}),e[35]=y,e[36]=b,e[37]=_):_=e[37],_}function Wi(r){const e=W.c(2);let t;e[0]!==r?(t=()=>r||jn(),e[0]=r,e[1]=t):t=e[1];const[i]=f.useState(t);return i}const Ni=ve.div`
  position: relative;
`,Di=ve.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:r})=>r?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:r})=>!r&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,wr=function(r){const e=W.c(27),{id:t,order:i,disabled:a}=r,n=a===void 0?!1:a,s=f.useRef(null),o=f.useContext(jt);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const c=Wi(t),{activeResizer:u,drag:m,startDragging:d,stopDragging:p,registerElement:h,unregisterElement:x}=o,w=u===c;if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");let v;e[0]!==c||e[1]!==d?(v=k=>{d(c,k.nativeEvent)},e[0]=c,e[1]=d,e[2]=v):v=e[2];const g=v;let P;e[3]!==m||e[4]!==c?(P=k=>{m(c,k)},e[3]=m,e[4]=c,e[5]=P):P=e[5];const S=P;let y;e[6]!==p?(y=()=>{s.current.blur(),p()},e[6]=p,e[7]=y):y=e[7];const b=y;let _,A;e[8]!==n||e[9]!==w||e[10]!==S||e[11]!==b?(_=()=>{if(!w||n)return;const k=function(){const T=document.body.style,z=document.documentElement.style,{cursor:N}=z,{userSelect:B}=T;return z.cursor="ew-resize",T.userSelect="none",()=>{N?z.cursor=N:z.removeProperty("cursor"),B?T.userSelect=B:T.removeProperty("user-select")}}();return window.addEventListener("mousemove",S),window.addEventListener("mouseup",b),window.addEventListener("contextmenu",b),()=>{k(),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",b),window.removeEventListener("contextmenu",b)}},A=[n,w,S,b],e[8]=n,e[9]=w,e[10]=S,e[11]=b,e[12]=_,e[13]=A):(_=e[12],A=e[13]),f.useEffect(_,A);let j,C;e[14]!==c||e[15]!==i||e[16]!==h||e[17]!==x?(j=()=>(h(c,{id:c,order:i,type:"resizer",el:s}),()=>{x(c)}),C=[c,i,h,x],e[14]=c,e[15]=i,e[16]=h,e[17]=x,e[18]=j,e[19]=C):(j=e[18],C=e[19]),f.useLayoutEffect(j,C);let R,E;e[20]===Symbol.for("react.memo_cache_sentinel")?(E=l.jsx("span",{}),R=l.jsx("span",{}),e[20]=R,e[21]=E):(R=e[20],E=e[21]);let L;e[22]!==n?(L=l.jsxs(Di,{$disabled:n,children:[E,R]}),e[22]=n,e[23]=L):L=e[23];let I;return e[24]!==g||e[25]!==L?(I=l.jsx(Ni,{onMouseDown:g,ref:s,children:L}),e[24]=g,e[25]=L,e[26]=I):I=e[26],I},Fi=r=>{const e=W.c(8),{documentId:t,setDisplayedDocument:i,getCommentIntent:a}=r;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=l.jsx(wr,{order:4}),e[0]=n):n=e[0];let s;e[1]!==a||e[2]!==r.children?(s=l.jsx(Qr,{getIntent:a,children:r.children}),e[1]=a,e[2]=r.children,e[3]=s):s=e[3];let o;return e[4]!==t||e[5]!==i||e[6]!==s?(o=l.jsxs(l.Fragment,{children:[n,l.jsx(Ct,{id:"content",minWidth:325,order:5,children:l.jsx(Tn,{documentId:t,setDisplayedDocument:i,children:s})})]}),e[4]=t,e[5]=i,e[6]=s,e[7]=o):o=e[7],o},Vi=r=>{const e=W.c(14),{documentId:t,documentsOnPage:i,documentType:a,getCommentIntent:n,mainDocumentState:s,onFocusPath:o,onStructureParams:c,searchParams:u,setDisplayedDocument:m,structureParams:d}=r;let p;e[0]!==t||e[1]!==a||e[2]!==i||e[3]!==s||e[4]!==o||e[5]!==c||e[6]!==u||e[7]!==d?(p=l.jsx(zi,{documentId:t,documentType:a,mainDocumentState:s,onFocusPath:o,onStructureParams:c,refs:i,searchParams:u,structureParams:d}),e[0]=t,e[1]=a,e[2]=i,e[3]=s,e[4]=o,e[5]=c,e[6]=u,e[7]=d,e[8]=p):p=e[8];let h;return e[9]!==t||e[10]!==n||e[11]!==m||e[12]!==p?(h=l.jsx(Fi,{documentId:t,getCommentIntent:n,setDisplayedDocument:m,children:p}),e[9]=t,e[10]=n,e[11]=m,e[12]=p,e[13]=h):h=e[13],h},Bi=function(r){const e=W.c(5),{children:t,navigate:i}=r;let a;e[0]!==i?(a=(o,c)=>{i((c===void 0?void 0:c)||{},o?{preview:o}:{})},e[0]=i,e[1]=a):a=e[1];const n=a;let s;return e[2]!==t||e[3]!==n?(s=l.jsx(Vr.Provider,{value:n,children:t}),e[2]=t,e[3]=n,e[4]=s):s=e[4],s};function Ki(r,e){const t=W.c(9);let i;t[0]!==e||t[1]!==r?(i=()=>JSON.parse(localStorage.getItem(r)??JSON.stringify(e)),t[0]=e,t[1]=r,t[2]=i):i=t[2];const[a,n]=f.useState(i);let s,o;t[3]!==r||t[4]!==a?(s=()=>{localStorage.setItem(r,JSON.stringify(a))},o=[r,a],t[3]=r,t[4]=a,t[5]=s,t[6]=o):(s=t[5],o=t[6]),f.useEffect(s,o);let c;return t[7]!==a?(c=[a,n],t[7]=a,t[8]=c):c=t[8],c}function Hi(r){const e=W.c(11),{unstable_navigator:t}=r,i=!!(t!=null&&t.component),[a,n]=Ki("presentation/navigator",i),s=i?a:!1;let o;e:{if(!i){o=void 0;break e}let h;e[0]!==n?(h=()=>n(Gi),e[0]=n,e[1]=h):h=e[1],o=h}const c=o;let u;e[2]!==s||e[3]!==t?(u=function(){return l.jsx(l.Fragment,{children:s&&l.jsx(Xi,{...t})})},e[2]=s,e[3]=t,e[4]=u):u=e[4];const m=u;let d;e[5]!==s||e[6]!==c?(d={navigatorEnabled:s,toggleNavigator:c},e[5]=s,e[6]=c,e[7]=d):d=e[7];let p;return e[8]!==m||e[9]!==d?(p=[d,m],e[8]=m,e[9]=d,e[10]=p):p=e[10],p}function Gi(r){return!r}function qi(r){const e=W.c(11),{minWidth:t,maxWidth:i,component:a}=r,n=t!=null&&i!=null&&t===i;let s;e[0]!==a?(s=l.jsx(a,{}),e[0]=a,e[1]=s):s=e[1];let o;e[2]!==i||e[3]!==t||e[4]!==s?(o=l.jsx(Ct,{id:"navigator",minWidth:t,maxWidth:i,order:1,children:s}),e[2]=i,e[3]=t,e[4]=s,e[5]=o):o=e[5];let c;e[6]!==n?(c=l.jsx(wr,{order:2,disabled:n}),e[6]=n,e[7]=c):c=e[7];let u;return e[8]!==o||e[9]!==c?(u=l.jsxs(l.Fragment,{children:[o,c]}),e[8]=o,e[9]=c,e[10]=u):u=e[10],u}const Xi=f.memo(qi),Qi=function(r){const e=W.c(3),{children:t,params:i}=r;let a;a=i;const n=a;let s;return e[0]!==t||e[1]!==n?(s=l.jsx(Br.Provider,{value:n,children:t}),e[0]=t,e[1]=n,e[2]=s):s=e[2],s},Ji=function(r){const e=W.c(10),{children:t,devMode:i,name:a,navigate:n,params:s,searchParams:o,structureParams:c}=r;let u,m;e[0]!==i||e[1]!==a||e[2]!==n||e[3]!==s||e[4]!==o||e[5]!==c?(m={devMode:i,name:a,navigate:n,params:s,searchParams:o,structureParams:c},e[0]=i,e[1]=a,e[2]=n,e[3]=s,e[4]=o,e[5]=c,e[6]=m):m=e[6],u=m;const d=u;let p;return e[7]!==t||e[8]!==d?(p=l.jsx(Fr.Provider,{value:d,children:t}),e[7]=t,e[8]=d,e[9]=p):p=e[9],p};function kt(r){const e=ee(r,Yi);if(!Array.isArray(e))throw new TypeError("allowPatterns must be an array");return e}function Yi(r){return r.context.allowOrigins}function De(r){return Array.isArray(r)?r.join(","):r}function yr(){const r=W.c(2),e=f.useId();let t;return r[0]!==e?(t=e.startsWith(":")?e.replace(/^:(.+):$/,"«$1»"):e,r[0]=e,r[1]=t):t=r[1],t}const Zi=f.forwardRef(function(r,e){const t=W.c(19),{animate:i,initial:a,onLoad:n,preventClick:s,src:o,variants:c,style:u}=r,m=f.useRef(null);let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>m.current,t[0]=d):d=t[0],f.useImperativeHandle(e,d);let p,h;t[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{if(!m.current)return;const y=m.current,b=function(){y===document.activeElement&&y.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))};return window.addEventListener("blur",b),()=>{window.removeEventListener("blur",b)}},h=[],t[1]=p,t[2]=h):(p=t[1],h=t[2]),f.useEffect(p,h);const x=yr();let w;t[3]!==u||t[4]!==x?(w={...u,viewTransitionName:x},t[3]=u,t[4]=x,t[5]=w):w=t[5];let v;t[6]!==i||t[7]!==a||t[8]!==n||t[9]!==o||t[10]!==w||t[11]!==c?(v=l.jsx(ea,{style:w,animate:i,initial:a,onLoad:n,ref:m,src:o,variants:c}),t[6]=i,t[7]=a,t[8]=n,t[9]=o,t[10]=w,t[11]=c,t[12]=v):v=t[12];let g;t[13]!==s?(g=s&&l.jsx(ta,{}),t[13]=s,t[14]=g):g=t[14];let P;t[15]===Symbol.for("react.memo_cache_sentinel")?(P=l.jsx(ra,{}),t[15]=P):P=t[15];let S;return t[16]!==v||t[17]!==g?(S=l.jsxs(l.Fragment,{children:[v,g,P]}),t[16]=v,t[17]=g,t[18]=S):S=t[18],S}),ea=Ge.create(ve.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),ta=ve(fe)`
  position: absolute;
  inset: 0;
  background: transparent;
`,ra=rn`
html:active-view-transition-type(sanity-iframe-viewport) {
  view-transition-name: none;
  &::view-transition {
    pointer-events: none;
  }
  /* &::view-transition-old(root) {
    display: none;
  }
  &::view-transition-new(root) {
    animation: none;
  } */
}
`;function na(r){const e=W.c(16),{openPopup:t,previewLocationOrigin:i,previewLocationRoute:a,perspective:n,targetOrigin:s}=r;let o;const c=new URL(a,i||s);c.searchParams.set(Ne,De(n));const{pathname:u,search:m}=c;o=`${i}${u}${m}`;const d=o,{t:p}=ye(xe);let h;e[0]!==t?(h=b=>{b.preventDefault(),t(b.currentTarget.href)},e[0]=t,e[1]=h):h=e[1];const x=h;let w;e[2]!==p?(w=p("share-url.menu-item.open.text"),e[2]=p,e[3]=w):w=e[3];let v;e[4]!==w?(v=l.jsx(re,{size:1,children:w}),e[4]=w,e[5]=v):v=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=["bottom-start"],e[6]=g):g=e[6];let P;e[7]!==p?(P=p("share-url.menu-item.open.text"),e[7]=p,e[8]=P):P=e[8];let S;e[9]!==x||e[10]!==d||e[11]!==P?(S=l.jsx(Ee,{as:"a","aria-label":P,icon:En,mode:"bleed",href:d,rel:"opener",target:"_blank",tooltipProps:null,onClick:x}),e[9]=x,e[10]=d,e[11]=P,e[12]=S):S=e[12];let y;return e[13]!==v||e[14]!==S?(y=l.jsx(Be,{animate:!0,content:v,fallbackPlacements:g,placement:"bottom",portal:!0,children:S}),e[13]=v,e[14]=S,e[15]=y):y=e[15],y}function xr(r){const e=ee(r,ia);if(!e)throw new TypeError("targetOrigin is required");return e}function ia(r){var e;return(e=r.context.previewUrl)==null?void 0:e.origin}function aa(r){var G;const e=W.c(32),{fontSize:t,onChange:i,padding:a,prefix:n,suffix:s,value:o,previewUrlRef:c}=r,u=t===void 0?1:t,m=a===void 0?3:a,d=kt(c),p=xr(c),{t:h}=ye(xe),{basePath:x}=((G=Jt())==null?void 0:G.activeWorkspace)||{},w=x===void 0?"/":x,v=f.useRef(null),[g,P]=f.useState(void 0),[S,y]=f.useState(void 0);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=q=>{P(q.currentTarget.value)},e[0]=b):b=e[0];const _=b;let A;e[1]!==d||e[2]!==w||e[3]!==i||e[4]!==g||e[5]!==h||e[6]!==p?(A=q=>{var le;if(q.key==="Enter"){if(g===void 0)return;let J=g;try{J=new URL(g,p).toString()}catch{}if(Array.isArray(d)){if(!d.some(se=>se.test(J))){y(h("preview-location-input.error",{origin:p,context:"origin-not-allowed"})),q.currentTarget.reportValidity();return}}else if(!p&&(J.startsWith(`${w}/`)||J===w)){y(h("preview-location-input.error",{basePath:w,context:"same-base-path"}));return}const ne=J===p?`${p}/`:J;y(void 0),P(void 0),i(ne),(le=v.current)==null||le.blur()}q.key==="Escape"&&(y(void 0),P(void 0))},e[1]=d,e[2]=w,e[3]=i,e[4]=g,e[5]=h,e[6]=p,e[7]=A):A=e[7];const j=A;let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{y(void 0),P(void 0)},e[8]=C):C=e[8];const R=C;let E;e[9]!==p||e[10]!==o?(E=()=>{y(void 0);let q=o;try{q=new URL(o,p).toString()}catch{}P(q)},e[9]=p,e[10]=o,e[11]=E):E=e[11];const L=E;let I;e[12]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{y(void 0),P(void 0)},e[12]=I):I=e[12];let k;e[13]!==p||e[14]!==o?(k=[p,o],e[13]=p,e[14]=o,e[15]=k):k=e[15],f.useEffect(I,k);let T,z;e[16]===Symbol.for("react.memo_cache_sentinel")?(z={icon:Rn},e[16]=z):z=e[16],T=z;const N=S?T:void 0;let B;e[17]===Symbol.for("react.memo_cache_sentinel")?(B={zIndex:1},e[17]=B):B=e[17];let X;e[18]!==g||e[19]!==p||e[20]!==o?(X=g===void 0?new URL(o,p).toString():g,e[18]=g,e[19]=p,e[20]=o,e[21]=X):X=e[21];let ae;return e[22]!==S||e[23]!==u||e[24]!==L||e[25]!==j||e[26]!==m||e[27]!==n||e[28]!==s||e[29]!==N||e[30]!==X?(ae=l.jsx(l.Fragment,{children:l.jsx(yn,{clearButton:N,customValidity:S,fontSize:u,onBlur:R,onClear:L,onChange:_,onKeyDownCapture:j,padding:m,prefix:n,style:B,radius:2,ref:v,space:m,suffix:s,value:X})}),e[22]=S,e[23]=u,e[24]=L,e[25]=j,e[26]=m,e[27]=n,e[28]=s,e[29]=N,e[30]=X,e[31]=ae):ae=e[31],ae}const sa=f.lazy(()=>Re(()=>import("./QRCodeSVG-B_5TrLcN.js"),__vite__mapDeps([0,1]))),gt=24,oa=16,ca=224,la=ve(Cn)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${gt}px;
  width: ${gt}px;
`,ua=Ge.create(Ye),da=Ge.create(re),pa=Ge.create(la),br=f.memo(function(r){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,initialUrl:i,previewLocationRoute:a,perspective:n}=r,{t:s}=ye(xe),{push:o}=nt(),c=rt({apiVersion:st}),u=Qt(),[m,d]=f.useState(!0),[p,h]=f.useState(!1),[x,w]=f.useState(!1),[v,g]=f.useState(null),P=p||x||m,S=f.useMemo(()=>v?Nn(i,v,a,De(n)):null,[i,n,a,v]),[y,b]=f.useState(null);if(y)throw y;const _=f.useCallback(()=>{o({closable:!0,status:"warning",title:s("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[o,s]),A=f.useCallback(async()=>{try{w(!0),await Fn(c,"sanity/presentation",typeof window>"u"?"":location.href,u==null?void 0:u.id),g(null)}catch(R){b(R)}finally{w(!1)}},[c,u==null?void 0:u.id]),j=f.useCallback(async()=>{try{h(!0);const R=await Dn(c,"sanity/presentation",typeof window>"u"?"":location.href,u==null?void 0:u.id);g(R.secret)}catch(R){b(R)}finally{h(!1)}},[c,u==null?void 0:u.id]),C=f.useCallback(()=>{try{if(!S)throw new Error("No URL to copy");navigator.clipboard.writeText(S.toString()),o({closable:!0,status:"success",title:s("share-url.clipboard.status",{context:"success"})})}catch(R){b(R)}},[o,s,S]);return f.useEffect(()=>{let R=new AbortController,E=[];async function L(k,T){const{result:z,syncTags:N}=await c.fetch(sr,{},{filterResponse:!1,lastLiveEventId:k,tag:"presentation.fetch-shared-access-secret"});Array.isArray(N)&&(E=N),T.aborted||g(z)}const I=c.live.events().subscribe({next:k=>{k.type==="message"&&(R.abort(),R=new AbortController,k.tags.some(T=>E.includes(T))&&L(k.id,R.signal))},error:b});return L(null,R.signal).finally(()=>d(!1)),()=>{I.unsubscribe(),R.abort()}},[c]),l.jsx(nn,{button:l.jsx(Ee,{"aria-label":s("preview-frame.share-button.aria-label"),icon:un,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:l.jsx(an,{style:{maxWidth:248},padding:t?void 0:0,children:t?l.jsxs(l.Fragment,{children:[l.jsx("label",{style:{cursor:"pointer"},children:l.jsxs(sn,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[l.jsx(Be,{animate:!0,content:l.jsx(re,{size:1,children:s("share-preview-menu.toggle-button.tooltip",{context:S?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:l.jsx(ar,{checked:p||S!==null&&!x,readOnly:p||x,indeterminate:m,onChange:e?S?A:j:_})}),l.jsx(re,{size:1,weight:"medium",children:s("share-preview-menu.toggle-button.label",{context:"first-line"})}),l.jsx("span",{}),l.jsx(re,{muted:!0,size:1,children:s("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),l.jsx(fe,{padding:3,paddingTop:2,children:l.jsxs($e,{space:3,children:[l.jsx(de,{tone:P||!S?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(ir,{children:P?l.jsx(ua,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):S?l.jsx(l.Fragment,{children:l.jsxs(f.Suspense,{fallback:l.jsx(Ye,{}),children:[l.jsx(sa,{title:s("share-preview-menu.qr-code.title",{url:S.toString()}),value:S.toString(),size:ca,color:"var(--card-fg-color)",logoSize:gt+oa}),l.jsx(pa,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):l.jsx(da,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s("share-preview-menu.qr-code.placeholder")})})}),l.jsx(re,{muted:!0,size:1,children:s("share-preview-menu.qr-code.instructions")})]})}),l.jsx(on,{}),l.jsx(cn,{disabled:!S||x,icon:ln,onClick:C,text:s("share-preview-menu.copy-url.text")})]}):l.jsx(de,{padding:2,tone:"caution",radius:3,children:l.jsx(re,{style:{textWrap:"pretty"},children:s("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});br.displayName="Memo(SharePreviewMenu)";const ma=r=>{const e=W.c(107),{canSharePreviewAccess:t,canToggleSharePreviewAccess:i,canUseSharedPreviewAccess:a,iframeRef:n,initialUrl:s,navigatorEnabled:o,onPathChange:c,onRefresh:u,openPopup:m,overlaysConnection:d,presentationRef:p,perspective:h,previewUrl:x,setViewport:w,targetOrigin:v,toggleNavigator:g,toggleOverlay:P,viewport:S,previewUrlRef:y}=r,{t:b}=ye(xe);let _;e[0]!==w||e[1]!==S?(_=()=>w(S==="desktop"?"mobile":"desktop"),e[0]=w,e[1]=S,e[2]=_):_=e[2];const A=_;let j;j=v===location.origin?"":v;const C=j;let R;e[3]!==n||e[4]!==u||e[5]!==p||e[6]!==x||e[7]!==v?(R=()=>{u(()=>{n.current&&(p.send({type:"iframe reload"}),Object.assign(n.current,{src:`${v}${x||"/"}`}))})},e[3]=n,e[4]=u,e[5]=p,e[6]=x,e[7]=v,e[8]=R):R=e[8];const E=R,L=ee(p,va),I=ee(p,ga),k=ee(p,wa),T=ee(p,ya),z=ee(p,xa);let N;const B=new URL(x||"/",v),{pathname:X,search:ae}=Wn(B);N=`${X}${ae}`;const G=N,q=yr(),le=ee(y,ba);let J;e[9]===Symbol.for("react.memo_cache_sentinel")?(J={width:"100%"},e[9]=J):J=e[9];let ne;e[10]!==o||e[11]!==b||e[12]!==g?(ne=g&&l.jsx(Ee,{"aria-label":b("preview-frame.navigator.toggle-button.aria-label"),icon:Jr,mode:"bleed",onClick:g,selected:o,tooltipProps:{content:l.jsx(re,{size:1,children:b("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=o,e[11]=b,e[12]=g,e[13]=ne):ne=e[13];let se;e[14]===Symbol.for("react.memo_cache_sentinel")?(se={whiteSpace:"nowrap"},e[14]=se):se=e[14];const Y=z?"disable":"enable";let oe;e[15]!==b||e[16]!==Y?(oe=b("preview-frame.overlay.toggle-button.tooltip",{context:Y}),e[15]=b,e[16]=Y,e[17]=oe):oe=e[17];let F;e[18]!==oe?(F=l.jsx(fe,{padding:1,children:l.jsx(re,{size:1,children:oe})}),e[18]=oe,e[19]=F):F=e[19];let K;e[20]===Symbol.for("react.memo_cache_sentinel")?(K=l.jsx(fe,{paddingY:1,children:l.jsx(dn,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=K):K=e[20];let H;e[21]!==F?(H=l.jsxs(ie,{align:"center",style:se,children:[F,K]}),e[21]=F,e[22]=H):H=e[22];let Q;e[23]===Symbol.for("react.memo_cache_sentinel")?(Q=["bottom-start"],e[23]=Q):Q=e[23];let $;e[24]===Symbol.for("react.memo_cache_sentinel")?($={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=$):$=e[24];const V=z?"transparent":void 0;let D;e[25]===Symbol.for("react.memo_cache_sentinel")?(D={margin:-4},e[25]=D):D=e[25];const Z=!I,ce=L||d!=="connected";let pe;e[26]!==z||e[27]!==Z||e[28]!==ce||e[29]!==P?(pe=l.jsx("div",{style:D,children:l.jsx(ar,{indeterminate:Z,checked:z,onChange:P,disabled:ce})}),e[26]=z,e[27]=Z,e[28]=ce,e[29]=P,e[30]=pe):pe=e[30];const Ce=!z;let be;e[31]!==b?(be=b("preview-frame.overlay.toggle-button.text"),e[31]=b,e[32]=be):be=e[32];let Pe;e[33]!==Ce||e[34]!==be?(Pe=l.jsx(fe,{children:l.jsx(re,{muted:Ce,size:1,weight:"medium",children:be})}),e[33]=Ce,e[34]=be,e[35]=Pe):Pe=e[35];let he;e[36]!==pe||e[37]!==Pe?(he=l.jsxs(ie,{align:"center",gap:3,children:[pe,Pe]}),e[36]=pe,e[37]=Pe,e[38]=he):he=e[38];let Se;e[39]!==V||e[40]!==he?(Se=l.jsx(de,{as:"label",flex:"none",padding:3,marginX:1,style:$,tone:V,children:he}),e[39]=V,e[40]=he,e[41]=Se):Se=e[41];let ge;e[42]!==H||e[43]!==Se?(ge=l.jsx(Be,{animate:!0,content:H,fallbackPlacements:Q,placement:"bottom",portal:!0,children:Se}),e[42]=H,e[43]=Se,e[44]=ge):ge=e[44];let Ae;e[45]!==I||e[46]!==L||e[47]!==k||e[48]!==T||e[49]!==b?(Ae=I?b("preview-frame.refresh-button.tooltip"):b("preview-frame.status",{context:L?"loading":k?"refreshing":T?"reloading":"unknown"}),e[45]=I,e[46]=L,e[47]=k,e[48]=T,e[49]=b,e[50]=Ae):Ae=e[50];let ke;e[51]!==Ae?(ke=l.jsx(re,{size:1,children:Ae}),e[51]=Ae,e[52]=ke):ke=e[52];let Ie;e[53]===Symbol.for("react.memo_cache_sentinel")?(Ie=["bottom-end"],e[53]=Ie):Ie=e[53];let je;e[54]!==b?(je=b("preview-frame.refresh-button.aria-label"),e[54]=b,e[55]=je):je=e[55];const Le=T||k||le;let M;e[56]!==E||e[57]!==je||e[58]!==Le?(M=l.jsx(Ee,{"aria-label":je,icon:pn,mode:"bleed",loading:Le,onClick:E,tooltipProps:null}),e[56]=E,e[57]=je,e[58]=Le,e[59]=M):M=e[59];let O;e[60]!==ke||e[61]!==M?(O=l.jsx(fe,{padding:1,children:l.jsx(Be,{animate:!0,content:ke,fallbackPlacements:Ie,placement:"bottom",portal:!0,children:M})}),e[60]=ke,e[61]=M,e[62]=O):O=e[62];let U;e[63]!==m||e[64]!==h||e[65]!==C||e[66]!==G||e[67]!==v?(U=l.jsx(fe,{padding:1,children:l.jsx(na,{openPopup:m,previewLocationOrigin:C,previewLocationRoute:G,perspective:h,targetOrigin:v})}),e[63]=m,e[64]=h,e[65]=C,e[66]=G,e[67]=v,e[68]=U):U=e[68];let _e;e[69]!==c||e[70]!==G||e[71]!==y||e[72]!==O||e[73]!==U?(_e=l.jsx(fe,{flex:1,children:l.jsx(aa,{previewUrlRef:y,prefix:O,onChange:c,suffix:U,value:G})}),e[69]=c,e[70]=G,e[71]=y,e[72]=O,e[73]=U,e[74]=_e):_e=e[74];let ue;e[75]!==q?(ue=ct=>{ct==null||ct.style.setProperty("view-transition-name",q)},e[75]=q,e[76]=ue):ue=e[76];const Fe=S==="desktop"?"narrow":"full";let Te;e[77]!==b||e[78]!==Fe?(Te=b("preview-frame.viewport-button.tooltip",{context:Fe}),e[77]=b,e[78]=Fe,e[79]=Te):Te=e[79];let we;e[80]!==Te?(we=l.jsx(re,{size:1,children:Te}),e[80]=Te,e[81]=we):we=e[81];let qe;e[82]===Symbol.for("react.memo_cache_sentinel")?(qe=["bottom-start"],e[82]=qe):qe=e[82];let Ue;e[83]!==b?(Ue=b("preview-frame.viewport-button.aria-label"),e[83]=b,e[84]=Ue):Ue=e[84];const ot=S==="desktop"?Yr:Zr;let Oe;e[85]!==Ue||e[86]!==ot||e[87]!==A||e[88]!==S?(Oe=l.jsx(Ee,{"data-testid":"preview-viewport-toggle","data-viewport":S,"aria-label":Ue,icon:ot,mode:"bleed",onClick:A,tooltipProps:null}),e[85]=Ue,e[86]=ot,e[87]=A,e[88]=S,e[89]=Oe):Oe=e[89];let ze;e[90]!==ue||e[91]!==we||e[92]!==Oe?(ze=l.jsx(ie,{align:"center",flex:"none",gap:1,children:l.jsx(Be,{animate:!0,ref:ue,content:we,fallbackPlacements:qe,placement:"bottom",portal:!0,children:Oe})}),e[90]=ue,e[91]=we,e[92]=Oe,e[93]=ze):ze=e[93];let We;e[94]!==t||e[95]!==i||e[96]!==a||e[97]!==s||e[98]!==h||e[99]!==G?(We=t&&l.jsx(ie,{align:"center",flex:"none",gap:1,children:l.jsx(br,{canToggleSharePreviewAccess:i,canUseSharedPreviewAccess:a,previewLocationRoute:G,initialUrl:s,perspective:h})}),e[94]=t,e[95]=i,e[96]=a,e[97]=s,e[98]=h,e[99]=G,e[100]=We):We=e[100];let Xe;return e[101]!==ge||e[102]!==_e||e[103]!==ze||e[104]!==We||e[105]!==ne?(Xe=l.jsxs(ie,{align:"center",gap:1,paddingX:1,style:J,children:[ne,ge,_e,ze,We]}),e[101]=ge,e[102]=_e,e[103]=ze,e[104]=We,e[105]=ne,e[106]=Xe):Xe=e[106],Xe};function ha(r){var u;const e=W.c(7),t=fa,i=(u=r.options)==null?void 0:u.component;let a;e[0]!==i||e[1]!==r?(a=i?l.jsx(i,{...r,renderDefault:t}):t(r),e[0]=i,e[1]=r,e[2]=a):a=e[2];const n=a;let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s={position:"relative"},e[3]=s):s=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={minHeight:0},e[4]=o):o=e[4];let c;return e[5]!==n?(c=l.jsx(de,{flex:"none",padding:2,borderBottom:!0,style:s,children:l.jsx(ie,{align:"center",style:o,children:n})}),e[5]=n,e[6]=c):c=e[6],c}function fa(r){return l.jsx(ma,{...r})}function va(r){return r.matches("loading")}function ga(r){return r.matches("loaded")}function wa(r){return r.matches({loaded:"refreshing"})}function ya(r){return r.matches({loaded:"reloading"})}function xa(r){return r.context.visualEditingOverlaysEnabled}function ba(r){return r.hasTag("busy")}const ut=Ge.create(ie),Pr=f.memo(f.forwardRef(function(r,e){const{header:t,initialUrl:i,loadersConnection:a,overlaysConnection:n,perspective:s,viewport:o,vercelProtectionBypass:c,presentationRef:u,previewUrlRef:m}=r,[d,p]=f.useState(null),h=De(d===null?s:d),x=f.useMemo(()=>{const $=new URL(i);return $.searchParams.get(Ne)||$.searchParams.set(Ne,h),(c||$.searchParams.get(Ve))&&$.searchParams.set(xt,"samesitenone"),c&&!$.searchParams.get(Ve)&&$.searchParams.set(Ve,c),$},[i,h,c]);f.useEffect(()=>{a==="connected"&&p($=>$===null?s:$)},[a,s]);const{t:w}=ye(xe),{devMode:v}=Et(),g=Hr(),P=f.useRef(null),S=l.jsx(ha,{...r,iframeRef:P,options:t});f.useImperativeHandle(e,()=>P.current);const y=ee(u,$=>$.matches("loading")||$.matches({loaded:"reloading"})),[b,_]=f.useState(!1),A=ee(u,$=>$.matches({loaded:"refreshing"})),[j,C]=f.useState(!1),R=y||A||n==="connecting",E=f.useCallback(()=>{P.current&&(P.current.src=x.toString(),u.send({type:"iframe reload"}))},[u,x]),L=f.useCallback(()=>{k(!0)},[]),[I,k]=f.useState(!1),[T,z]=f.useState(!1);f.useEffect(()=>{if(!(y||A)&&(n==="connecting"||n==="reconnecting")){const $=setTimeout(()=>{z(!0)},5e3);return()=>clearTimeout($)}},[n,y,A]),f.useEffect(()=>{if(!(y||A||!T)){if(n==="connected"&&(C(!1),z(!1),_(!1),k(!1)),n==="connecting"){const $=setTimeout(()=>{_(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},Mt);return()=>clearTimeout($)}if(n==="reconnecting"){const $=setTimeout(()=>{_(!0),C(!0)},Mt);return()=>clearTimeout($)}}},[y,n,A,T]);const N=f.useCallback(()=>{u.send({type:"iframe loaded"})},[u]),B=f.useMemo(()=>(y||n==="connecting"&&!A)&&!I,[I,y,A,n]),X=f.useSyncExternalStore(f.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),ae=f.useMemo(()=>[B?"background":"active",y?"reloading":"idle",X?"":o,T&&!I?"timedOut":""],[X,I,y,B,T,o]),[G,q]=f.useState(o),[le,J]=f.useState(dt[o]);f.useEffect(()=>{if(X&&o!==G){const $=()=>{q(o),J(dt[o])};!g&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition({update:()=>Gr.flushSync(()=>$()),types:["sanity-iframe-viewport"]}):$()}},[X,g,G,o]);const ne=nt(),se=kt(m),[Y,oe]=f.useState(!1),[F]=f.useState(new Set),K=Je($=>{if(se.some(V=>V.test($))){oe($);return}F.has($)||(F.add($),console.warn("Visual Editing is here but misconfigured",{reportedOrigin:$}),ne.push({closable:!0,id:`presentation-iframe-origin-mismatch-${$}`,status:"error",duration:1/0,title:w("preview-frame.configuration.error.title"),description:l.jsx(Rt,{t:w,i18nKey:"preview-frame.configuration.error.description",components:{Code:"code"},values:{targetOrigin:x.origin,reportedOrigin:$}})}))}),H=qr(),Q=Je($=>{if(!Y)return;const V=new URL($,Y);H(`${Y}${V.pathname}${V.search}${V.hash}`)});return f.useEffect(()=>{var ce;if(!Y)return;const $=(ce=P.current)==null?void 0:ce.contentWindow;if(!$)return;const V=rr({targetOrigin:Y});V.addTarget($);const D=V.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},ht().provide({actors:ft()}));D.on("visual-editing/navigate",pe=>{Q(pe.url)});const Z=D.start();return()=>{Z(),V.destroy()}},[Y]),f.useEffect(()=>{if(n==="connecting"||n==="reconnecting"){const $=setInterval(()=>{var D,Z;(Z=(D=P.current)==null?void 0:D.contentWindow)==null||Z.postMessage({domain:"sanity/channels",from:"presentation",type:"presentation/status"},"*")},1e3),V=new AbortController;return window.addEventListener("message",({data:D})=>{D&&typeof D=="object"&&"domain"in D&&D.domain==="sanity/channels"&&"type"in D&&D.type==="visual-editing/status"&&"data"in D&&typeof D.data=="object"&&D.data&&"origin"in D.data&&typeof D.data.origin=="string"&&K(D.data.origin)},{signal:V.signal}),()=>{V.abort(),clearInterval($)}}},[n,b]),l.jsx(In,{transition:g?{duration:0}:void 0,children:l.jsxs(Xr,{children:[S,l.jsx(de,{flex:1,tone:"transparent",children:l.jsxs(ie,{align:"center",height:"fill",justify:"center",padding:(X?G:o)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:R?"wait":void 0},children:[l.jsx(ir,{children:!j&&!y&&!A&&T&&!I?l.jsx(ut,{initial:"initial",animate:"animate",exit:"exit",variants:Ot,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:b?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:b?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:l.jsxs(ie,{style:{...tt[o]},justify:"center",align:"center",direction:"column",gap:4,children:[b&&l.jsx(Ee,{disabled:!0,mode:"ghost",text:w("preview-frame.continue-button.text"),style:{opacity:0}}),l.jsx(de,{radius:2,tone:b?"caution":"inherit",padding:4,shadow:1,children:l.jsxs(ie,{justify:"center",align:"center",direction:"column",gap:4,children:[l.jsx(Ye,{muted:!0}),l.jsx(re,{muted:!0,size:1,children:b?w("preview-frame.status",{context:"timeout"}):w("preview-frame.status",{context:"connecting"})})]})}),b&&l.jsx(Ee,{tone:"critical",onClick:L,text:w("preview-frame.continue-button.text")})]})}):(y||n==="connecting"&&!A)&&!I?l.jsx(ut,{initial:"initial",animate:"animate",exit:"exit",variants:Ot,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:l.jsxs(ie,{style:{...tt[o]},justify:"center",align:"center",direction:"column",gap:4,children:[l.jsx(Ye,{muted:!0}),l.jsx(re,{muted:!0,size:1,children:w("preview-frame.status",{context:"loading"})})]})}):j&&!I?l.jsx(ut,{initial:"initial",animate:"animate",exit:"exit",variants:Pa,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:l.jsx(At,{flex:1,message:w("preview-frame.connection.error.text"),onRetry:E,onContinueAnyway:L,children:v&&l.jsxs(l.Fragment,{children:[n!=="connected"&&l.jsx(de,{padding:3,radius:2,tone:"critical",children:l.jsxs($e,{space:3,children:[l.jsx(Ze,{muted:!0,size:0,children:w("preview-frame.overlay.connection-status.label")}),l.jsx(et,{size:1,children:w("channel.status",{context:n})})]})}),a!=="connected"&&l.jsx(de,{padding:3,radius:2,tone:"critical",children:l.jsxs($e,{space:3,children:[l.jsx(Ze,{muted:!0,size:0,children:w("preview-frame.loader.connection-status.label")}),l.jsx(et,{size:1,children:w("channel.status",{context:a})})]})})]})})}):null}),l.jsx(Zi,{animate:ae,initial:["background"],onLoad:N,preventClick:B,ref:P,src:x.toString(),style:le,variants:dt})]})})]})})}));Pr.displayName="Memo(ForwardRef(Preview))";const tt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Ot={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Pa={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},dt={desktop:{...tt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...tt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function Sa(){let r=!1;return(...e)=>{r||(console.warn(...e),r=!0)}}const _a=Sa();function ja(r,e){const t=W.c(9);Dr(r);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={},t[0]=i):i=t[0];const[a,n]=f.useState(i);let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s={},t[1]=s):s=t[1];const[o,c]=f.useState(s),u=f.useRef("");let m;t[2]!==e?(m=(g,P,S)=>{const y=(S===void 0?[]:S).filter(Ra);(P==="published"?n:c)(b=>{const _={};for(const j of y)_[j._id]=j;if(u.current!==e.current.url)return u.current=e.current.url,{[g]:_};const A=b[g];return Mn(A,_)?b:{...b,[g]:_}})},t[2]=e,t[3]=m):m=t[3];const d=m;let p;const h=r==="published"?a:o;let x;if(t[4]!==h){const g=Object.values(h).reduce(Ea,{});x=Object.values(g),t[4]=h,t[5]=x}else x=t[5];p=x;const w=p;let v;return t[6]!==w||t[7]!==d?(v=[w,d],t[6]=w,t[7]=d,t[8]=v):v=t[8],v}function Ea(r,e){return Object.values(e).forEach(t=>{r[t._id]=t}),r}function Ra(r){return"_projectId"in r&&r._projectId?(_a("Cross dataset references are not supported yet, ignoring source document",r),!1):r}function Sr(r,e){return r instanceof Function?r(e):r}function Ca(r,e){var t;if(r.resolve){const i=(t=r.resolve(e))==null?void 0:t.filter;return i?`// groq
*[${i}][0]{_id, _type}`:void 0}return"type"in r?`// groq
*[_type == "${r.type}"][0]{_id, _type}`:`// groq
*[${Sr(r.filter,e)}][0]{_id, _type}`}function Aa(r,e){var t;return r.resolve?((t=r.resolve(e))==null?void 0:t.params)??e.params:"type"in r?{}:Sr(r.params,e)??e.params}function ka(r,e){const t=Array.isArray(r)?r:[r];for(r of t){let i,a=r;if(typeof r=="string")try{const n=new URL(r);i=n.origin,a=n.pathname}catch{}if(!(i&&e.origin!==i))try{const n=Kn(a,{decode:decodeURIComponent})(e.pathname);if(n){const{params:s,path:o}=n;return{origin:i,params:s,path:o}}}catch{throw new Error(`"${r}" is not a valid route pattern`)}}}function Ta(r){var _,A;const e=W.c(22),{navigate:t,navigationHistory:i,path:a,targetOrigin:n,resolvers:s}=r;let o;e[0]!==s?(o=s===void 0?[]:s,e[0]=s,e[1]=o):o=e[1];const c=o,{state:u}=He(),{perspectiveStack:m}=_t();let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d={apiVersion:st},e[2]=d):d=e[2];const p=rt(d);let h;e[3]!==a||e[4]!==u?(h=a||((A=(_=u._searchParams)==null?void 0:_.find(Ma))==null?void 0:A[1])||"",e[3]=a,e[4]=u,e[5]=h):h=e[5];const x=h,[w,v]=f.useState(void 0),g=f.useRef(void 0);let P;e[6]!==t||e[7]!==i?(P=(j,C)=>{var R,E;(!j||g.current!==j._id)&&(v({document:j,path:C.pathname}),g.current=j==null?void 0:j._id,((R=i.at(-1))==null?void 0:R.id)===((E=i.at(-2))==null?void 0:E.id)&&(t==null||t({id:j==null?void 0:j._id,type:j==null?void 0:j._type})))},e[6]=t,e[7]=i,e[8]=P):P=e[8];const S=Je(P);let y;e[9]!==p||e[10]!==S||e[11]!==m||e[12]!==x||e[13]!==c||e[14]!==n?(y=()=>{const j=new URL(x,n);if(c.length){let C;for(const R of c){const E=ka(R.route,j);if(E){C={context:E,resolver:R};break}}if(C){const R=Ca(C.resolver,C.context),E=Aa(C.resolver,C.context);if(R){const L=new AbortController,I={perspective:m,signal:L.signal,tag:"use-main-document"};return p.fetch(R,E,I).then(k=>S(k,j)).catch(k=>{k instanceof Error&&k.name==="AbortError"||(v({document:void 0,path:j.pathname}),g.current=void 0)}),()=>{L.abort()}}}}v(void 0),g.current=void 0},e[9]=p,e[10]=S,e[11]=m,e[12]=x,e[13]=c,e[14]=n,e[15]=y):y=e[15];let b;return e[16]!==p||e[17]!==m||e[18]!==x||e[19]!==c||e[20]!==n?(b=[p,m,x,c,n],e[16]=p,e[17]=m,e[18]=x,e[19]=c,e[20]=n,e[21]=b):b=e[21],f.useEffect(y,b),w}function Ma(r){const[e]=r;return e==="preview"}const Ia=/^([\w-]+):(0|[1-9][0-9]*)$/,$a=/^([\w-]+):([0-9]+),([0-9]+)$/,La=/^([\w-]+):([\w-]+)$/;function Ua(r){const e=[];for(const t of r.split(".")){const i=Ia.exec(t);if(i){e.push(i[1],Number(i[2]));continue}const a=$a.exec(t);if(a){e.push(a[1],[Number(a[2]),Number(a[3])]);continue}const n=La.exec(t);if(n){e.push(n[1],{_key:n[2]});continue}e.push(t)}return e}function Oa(r){var t;if(r===void 0)return;const e=(t=decodeURIComponent(r))==null?void 0:t.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function za(r){if(r!==void 0)return nr.toString(Ua(decodeURIComponent(r)))}function Wa(r){return{id:Oa(r.id),path:za(r.path),type:r.type}}function Qe(r){return Object.fromEntries(Object.entries(r).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function Na({initialPreviewUrl:r,routerNavigate:e,routerState:t,routerSearchParams:i,frameStateRef:a}){const n=f.useMemo(()=>{const{id:d,path:p,type:h}=Wa(t);return{id:d,type:h,path:p,preview:i.preview||r.toString(),perspective:i.perspective,viewport:i.viewport,inspect:i.inspect,rev:i.rev,since:i.since,template:i.template,templateParams:i.templateParams,view:i.view,pathKey:i.pathKey,instruction:i.instruction,comment:i.comment,changesInspectorTab:i.changesInspectorTab}},[t,i,r]),s=f.useMemo(()=>Qe({inspect:n.inspect,path:n.path,rev:n.rev,since:n.since,template:n.template,templateParams:n.templateParams,view:n.view,pathKey:n.pathKey,instruction:n.instruction,comment:n.comment,changesInspectorTab:n.changesInspectorTab}),[n.changesInspectorTab,n.comment,n.inspect,n.instruction,n.path,n.pathKey,n.rev,n.since,n.template,n.templateParams,n.view]),o=f.useMemo(()=>Qe({perspective:n.perspective,preview:n.preview,viewport:n.viewport}),[n.perspective,n.preview,n.viewport]),c=f.useRef(t);f.useEffect(()=>{c.current=t},[t]);const[u,m]=f.useState([t]);return{navigate:f.useCallback((d,p={},h)=>{d.id&&(d.id=it(d.id));const{_searchParams:x,...w}=c.current,v=(x||[]).reduce((y,[b,_])=>(y[b]=_,y),{}),g=Qe({...w,...d}),P=Qe({...v,...p});w.id!==g.id&&(delete P.template,delete P.templateParams),g._searchParams=Object.entries(P).reduce((y,[b,_])=>[...y,[b,_]],[]);const S=h??P.preview===a.current.url;m(y=>[...y,g]),e(g,{replace:S})},[e,a]),navigationHistory:u,params:n,searchParams:o,structureParams:s}}const Da=r=>{const e=W.c(10),[t,i]=f.useState(Fa);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=d=>{const p=window.open(d,"_blank");p&&i(h=>new Set(h).add(p))},e[0]=a):a=e[0];const n=a;let s,o;e[1]!==r||e[2]!==t?(s=()=>{const d=[];if(t.size&&r)for(const p of t)p&&"closed"in p&&!p.closed&&d.push(r.addTarget(p));return()=>{d.forEach(Va)}},o=[r,t],e[1]=r,e[2]=t,e[3]=s,e[4]=o):(s=e[3],o=e[4]),f.useEffect(s,o);let c,u;e[5]!==t?(c=()=>{if(t.size){const d=setInterval(()=>{const p=new Set;for(const h of t)h&&"closed"in h&&h.closed&&p.add(h);p.size&&i(h=>{const x=new Set(h);for(const w of p)x.delete(w);return x})},mn);return()=>{clearInterval(d)}}},u=[t],e[5]=t,e[6]=c,e[7]=u):(c=e[6],u=e[7]),f.useEffect(c,u);let m;return e[8]!==t?(m={popups:t,open:n},e[8]=t,e[9]=m):m=e[9],m};function Fa(){return new Set}function Va(r){return r()}function _r(){const{perspectiveStack:r,selectedPerspectiveName:e,selectedReleaseId:t}=_t();return t?r:e===void 0?"drafts":e}function pt(){const r=W.c(4);let e;r[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,r[0]=e):e=r[0];const[t,i]=f.useState(e);let a;e:{const u=Array.from(t.values());if(u.find(Ha)){a="connected";break e}const m=u.filter(Ka);if(m.length){a=m.some(Ba)?"connecting":"reconnecting";break e}a="idle"}const n=a;let s;r[1]===Symbol.for("react.memo_cache_sentinel")?(s=u=>{i(m=>{var p;const d=new Map(m);if(u.status==="disconnected")d.delete(u.connection);else{const h=((p=d.get(u.connection))==null?void 0:p.hasConnected)||u.status==="connected",x=u.status==="handshaking"?"connecting":u.status;d.set(u.connection,{status:x,hasConnected:h})}return d})},r[1]=s):s=r[1];const o=s;let c;return r[2]!==n?(c=[n,o],r[2]=n,r[3]=c):c=r[3],c}function Ba(r){const{hasConnected:e}=r;return!e}function Ka(r){const{status:e}=r;return e==="connecting"}function Ha(r){const{status:e}=r;return e==="connected"}const Ga=f.lazy(()=>Re(()=>import("./LiveQueries-BpnxvMFM.js"),__vite__mapDeps([2,1,3]))),qa=f.lazy(()=>Re(()=>import("./PostMessageDocuments-Dk_6bIGt.js"),__vite__mapDeps([4,1]))),Xa=f.lazy(()=>Re(()=>import("./PostMessageRefreshMutations-C4QbM_bn.js"),__vite__mapDeps([5,1]))),Qa=f.lazy(()=>Re(()=>import("./PostMessagePerspective-TfWGyuoQ.js"),__vite__mapDeps([6,1]))),Ja=f.lazy(()=>Re(()=>import("./PostMessagePreviewSnapshots-BVE_mOwa.js"),__vite__mapDeps([7,1]))),Ya=f.lazy(()=>Re(()=>import("./PostMessageSchema-BCTN4YK9.js"),__vite__mapDeps([8,1]))),Za=f.lazy(()=>Re(()=>import("./PostMessageTelemetry-Cph-UVgp.js"),__vite__mapDeps([9,1]))),es=ve(ie)`
  overflow-x: auto;
`;function ts(r){var Ie,je,Le;const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,tool:i,vercelProtectionBypass:a,initialPreviewUrl:n,previewUrlRef:s}=r,o=kt(s),c=xr(s),u=(Ie=i.options)==null?void 0:Ie.components,m=i.name||Ir,{unstable_navigator:d,unstable_header:p}=u||{},{navigate:h,state:x}=He(),w=tr(Object.fromEntries(x._searchParams||[])),v=_r(),g=ee(s,M=>{var O;return((O=M.context.previewMode)==null?void 0:O.shareAccess)!==!1}),[P]=f.useState(()=>{var O;const M=(O=i.options)==null?void 0:O.devMode;return typeof M=="function"?M():typeof M=="boolean"?M:typeof window<"u"&&window.location.hostname==="localhost"}),S=f.useRef(null),[y,b]=f.useState(),[_,A]=f.useState(null),j=f.useRef({title:void 0,url:void 0}),{navigate:C,navigationHistory:R,params:E,searchParams:L,structureParams:I}=Na({initialPreviewUrl:n,routerNavigate:h,routerState:x,routerSearchParams:w,frameStateRef:j}),k=f.useMemo(()=>mr(C,50),[C]),T=er(ri),z=f.useMemo(()=>E.viewport?"mobile":"desktop",[E.viewport]),[N,B]=ja(v,j),X=$r(),ae=Lr(),G=Ta({navigate:C,navigationHistory:R,path:E.preview,targetOrigin:c,resolvers:(Le=(je=i.options)==null?void 0:je.resolve)==null?void 0:Le.mainDocuments}),[q,le]=pt(),[J,ne]=pt(),[se,Y]=pt(),{open:oe}=Da(y),F=ee(T,M=>M.matches("loading"));f.useEffect(()=>{var U;const M=(U=S.current)==null?void 0:U.contentWindow;if(!M||F)return;const O=rr({targetOrigin:c});return O.addTarget(M),b(O),()=>{O.destroy(),b(void 0)}},[c,F]);const K=Je((M,O,U)=>k(M,O,U));f.useEffect(()=>{if(!y)return;const M=y.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},ht().provide({actors:ft()}));M.on("visual-editing/focus",U=>{"id"in U&&K({type:U.type,id:U.id,path:U.path})}),M.on("visual-editing/navigate",U=>{const{title:_e}=U;let ue=U.url;if(!ue.startsWith("http"))try{ue=new URL(ue,c).toString()}catch{}if(j.current.url!==ue)try{const[Fe,Te]=ue.split("?"),we=new URLSearchParams(Te);we.delete(Ve),we.delete(xt),K({},{preview:`${Fe}${we.size>0?"?":""}${we}`})}catch{K({},{preview:ue})}j.current={title:_e,url:ue}}),M.on("visual-editing/meta",U=>{j.current.title=U.title}),M.on("visual-editing/toggle",U=>{T.send({type:"toggle visual editing overlays",enabled:U.enabled})}),M.on("visual-editing/documents",U=>{B("visual-editing",U.perspective,U.documents)}),M.on("visual-editing/refreshing",U=>{U.source==="manual"?clearTimeout(he.current):U.source==="mutation"&&T.send({type:"iframe refresh"})}),M.on("visual-editing/refreshed",()=>{T.send({type:"iframe loaded"})}),M.onStatus(le);const O=M.start();return A(M),()=>{O(),A(null)}},[y,T,B,le,c]),f.useEffect(()=>{if(!y)return;const M=y.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},ht().provide({actors:ft()}));return M.onStatus(Y),M.on("preview-kit/documents",O=>{O.projectId===X&&O.dataset===ae&&B("preview-kit",O.perspective,O.documents)}),M.start()},[y,ae,X,B,Y,c]);const H=f.useCallback(M=>{k({path:nr.toString(M)},{},!0)},[k]),Q=f.useCallback(M=>{const O=new URL(M,c),U=O.toString();E.preview!==U&&(Array.isArray(o)?o.some(_e=>_e.test(U))&&k({},{preview:U}):O.origin===c&&k({},{preview:U}))},[c,E.preview,o,k]),$=f.useCallback(M=>{k({},M)},[k]);f.useEffect(()=>{E.id&&E.path?_==null||_.post("presentation/focus",{id:E.id,path:E.path}):_==null||_.post("presentation/blur")},[E.id,E.path,_]),f.useEffect(()=>{if(j.current.url&&E.preview&&j.current.url!==E.preview){try{const M=new URL(j.current.url,c).origin,O=new URL(E.preview,c).origin;if(M!==O)return}catch{}if(j.current.url=E.preview,q==="connected"){let M=E.preview;if(M.startsWith("http"))try{const O=new URL(E.preview,c);M=O.pathname+O.search+O.hash}catch{}_==null||_.post("presentation/navigate",{url:M,type:"replace"})}}},[q,c,E.preview,_]);const V=f.useCallback(()=>_==null?void 0:_.post("presentation/toggle-overlay"),[_]),[D,Z]=f.useState(null);f.useEffect(()=>{const M=U=>{zt(U)&&V()},O=U=>{zt(U)&&V(),ns(["mod","\\"],U)&&V()};return window.addEventListener("keydown",O),window.addEventListener("keyup",M),()=>{window.removeEventListener("keydown",O),window.removeEventListener("keyup",M)}},[V]);const[ce,pe]=f.useState(null),[{navigatorEnabled:Ce,toggleNavigator:be},Pe]=Hi({unstable_navigator:d}),he=f.useRef(void 0),Se=f.useCallback(M=>{if(T.send({type:"iframe refresh"}),_){he.current=window.setTimeout(M,300),_.post("presentation/refresh",{source:"manual",livePreviewEnabled:se==="connected"||J==="connected"});return}M()},[J,T,se,_]),ge=Ur(),Ae=f.useCallback(({id:M,type:O,path:U})=>{if(j.current.url)return{title:j.current.title||j.current.url,name:"edit",params:{id:M,path:U,type:O,inspect:zr,workspace:ge.name,mode:Or,preview:E.preview}}},[E.preview,ge.name]),ke=f.useCallback(M=>{k({},{viewport:M==="desktop"?void 0:"mobile"},!0)},[k]);return l.jsxs(l.Fragment,{children:[l.jsx(Ji,{devMode:P,name:m,navigate:k,params:E,searchParams:L,structureParams:I,children:l.jsx(Bi,{navigate:k,children:l.jsx(Qi,{params:E,children:l.jsx(ni,{comlink:_,children:l.jsx(es,{"data-testid":"presentation-root",height:"fill",children:l.jsxs(hi,{children:[l.jsx(Pe,{}),l.jsx(Ct,{id:"preview",minWidth:325,defaultSize:Ce?50:75,order:3,children:l.jsx(ie,{direction:"column",flex:1,height:"fill",ref:pe,children:l.jsx(Wr,{element:ce,children:l.jsx(Pr,{canSharePreviewAccess:g,canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,header:p,initialUrl:n,loadersConnection:J,navigatorEnabled:Ce,onPathChange:Q,onRefresh:Se,openPopup:oe,overlaysConnection:q,previewUrl:E.preview,perspective:v,ref:S,setViewport:ke,targetOrigin:c,toggleNavigator:be,toggleOverlay:V,viewport:z,vercelProtectionBypass:a,presentationRef:T,previewUrlRef:s},c)})})}),l.jsx(Vi,{documentId:E.id,documentsOnPage:N,documentType:E.type,getCommentIntent:Ae,mainDocumentState:G,onFocusPath:H,onStructureParams:$,searchParams:L,setDisplayedDocument:Z,structureParams:I})]})})})})})}),l.jsxs(f.Suspense,{children:[y&&l.jsx(Ga,{controller:y,perspective:v,liveDocument:D,onDocumentsOnPage:B,onLoadersConnection:ne}),_&&E.id&&E.type&&l.jsx(Xa,{comlink:_,id:E.id,type:E.type,loadersConnection:J,previewKitConnection:se}),_&&l.jsx(Ya,{comlink:_,perspective:v}),_&&N.length>0&&l.jsx(Ja,{comlink:_,perspective:v,refs:N}),_&&l.jsx(qa,{comlink:_,perspective:v}),_&&l.jsx(ei,{comlink:_}),_&&l.jsx(Qa,{comlink:_,perspective:v}),_&&l.jsx(Za,{comlink:_})]})]})}function zt(r){return r.key==="Alt"}const rs=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Wt={alt:"altKey",ctrl:"ctrlKey",mod:rs?"metaKey":"ctrlKey",shift:"shiftKey"};function ns(r,e){return r.every(t=>Wt[t]?e[Wt[t]]:e.key===t.toUpperCase())}function is({client:r,currentUserId:e}){return me(async()=>await Jn(r,"sanity/presentation",location.href,e))}function as({client:r}){return me(async()=>r.fetch(sr,{},{tag:"presentation.fallback-to-shared-access-secret"}))}function ss({client:r,allowOption:e}){return me(async({input:t})=>{const{initialUrl:i}=t;if(typeof URLPattern>"u"&&await Re(()=>import("./index-CEBgaQ5I.js"),[]),!e)return[new URLPattern(i.origin)];const a=typeof e=="function"?await e({client:r,origin,initialUrl:i}):e,n=(Array.isArray(a)?a:[a]).map(s=>{const o=new URLPattern(s);if(o.hostname==="*")throw new Error("It's insecure to allow any hostname, it could disclose data to a malicious site");return o});return n.some(s=>s.test(i.origin))?n:[...n,new URLPattern(i.origin)]})}function os({client:r,studioBasePath:e,previewUrlOption:t,perspective:i}){return me(async({input:a})=>{const{origin:n}=location;if(typeof t=="function"){const s=await t({client:r,studioBasePath:e,previewUrlSecret:"",studioPreviewPerspective:De(i),previewSearchParam:a.previewSearchParam});return new URL(s,n)}if(!t)return new URL("/",n);if(typeof t=="string")return new URL(t,n);if(typeof t.initial=="function"){const s=await t.initial({client:r,origin:n});return new URL(s,n)}return typeof t.initial=="string"?new URL(t.initial,n):new URL(t.preview||"/",t.origin||n)})}function cs({client:r,previewUrlOption:e}){return me(async({input:t})=>{const{targetOrigin:i}=t;if(typeof e=="object"&&(e!=null&&e.draftMode))return{enable:e.draftMode.enable,shareAccess:e.draftMode.shareAccess??!0};if(!e||typeof e=="string"||typeof e=="function"||!e.previewMode)return!1;const a=typeof e.previewMode=="function"?await e.previewMode({client:r,origin,targetOrigin:i}):e.previewMode;return a===!1?!1:{enable:a.enable,shareAccess:a.shareAccess??!0}})}function ls({client:r,studioBasePath:e,previewUrlOption:t,perspective:i}){return me(async({input:a})=>{const{previewUrlSecret:n,resolvedPreviewMode:s,initialUrl:o}=a;if(typeof t=="function"){const u=await t({client:r,studioBasePath:e,previewUrlSecret:n,studioPreviewPerspective:De(i),previewSearchParam:o.toString()});return new URL(u,o)}if(!s)throw new Error("Resolved preview mode is false");const c=new URL(s.enable,o);return c.searchParams.set(yt,n),c.searchParams.set(Ne,De(i)),o.pathname!==c.pathname&&c.searchParams.set(wt,`${o.pathname}${o.search}${o.hash}`),c})}const us=me(async({input:r})=>{const{previewSearchParam:e,initialUrl:t,allowOrigins:i}=r;if(!e)return t;try{const a=new URL(e,t.origin);return i.some(n=>n.test(a.origin))?a:t}catch{return t}}),mt={_id:Ke,_type:Pt},ds={_id:`drafts.${Gt()}`,_type:qt},ps=Yt({actions:{"notify preview will likely fail":Nr("Missing permissions to create preview secret, or read shared preview secret. Preview will likely fail loading."),"assign preview search param":te({previewSearchParam:(r,e)=>e.previewSearchParam}),"assign error":te({error:(r,e)=>e.error instanceof Error?e.error:new Error(e.message,{cause:e.error})})},actors:{"check permission":Zt(()=>An(()=>new Error("The 'check permission' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'check permission': fromObservable(({input}: {input: CheckPermissionInput}) => ...)}})"))),"resolve initial url":me(()=>Promise.reject(new Error("The 'resolve initial url' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve initial url': fromPromise(...)}})"))),"resolve allow patterns":me(()=>Promise.reject(new Error("The 'resolve allow patterns' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve allow pattern': fromPromise(...)}})"))),"resolve url from preview search param":us,"resolve preview mode":me(()=>Promise.reject(new Error("The 'resolve preview mode' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve preview mode': fromPromise(...)}})"))),"create preview secret":me(async()=>Promise.reject(new Error("The 'create preview secret' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'create preview secret': fromPromise(...)}})"))),"read shared preview secret":me(async()=>Promise.reject(new Error("The 'read shared preview secret' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'read shared preview secret': fromPromise(...)}})"))),"resolve preview mode url":me(()=>Promise.reject(new Error("The 'resolve preview mode url' actor is not implemented. Add it to previewUrlMachine.provide({actors: {'resolve preview mode url': fromPromise(...)}})")))},guards:{"has checked permissions":({context:r})=>!!(r.previewAccessSharingCreatePermission&&r.previewAccessSharingReadPermission&&r.previewAccessSharingUpdatePermission&&r.previewUrlSecretPermission),"search param has new origin":({context:r,event:e})=>{if(!r.previewUrl||!e.previewSearchParam)return!1;try{const t=new URL(e.previewSearchParam,r.previewUrl);return r.previewUrl.origin!==t.origin}catch{return!1}},"can create preview secret":({context:r})=>{var e;return((e=r.previewUrlSecretPermission)==null?void 0:e.granted)===!0},"has preview mode with created secret":({context:r},e)=>{var t;return e===!1?!1:((t=r.previewUrlSecretPermission)==null?void 0:t.granted)===!0},"has preview mode with share access":({context:r},e)=>{var t;return e===!1?!1:((t=r.previewAccessSharingReadPermission)==null?void 0:t.granted)===!0},"has preview mode without permissions":({context:r},e)=>{var t,i;return e===!1?!1:((t=r.previewAccessSharingReadPermission)==null?void 0:t.granted)===!1&&((i=r.previewUrlSecretPermission)==null?void 0:i.granted)===!1}},delays:{expiredSecret:({context:r})=>{var i;if(!((i=r.previewUrlSecret)!=null&&i.expiresAt))return 0;const e=Date.now(),t=r.previewUrlSecret.expiresAt.getTime();return Math.max(t-e,0)}}}).createMachine({id:"Preview URL",context:({input:r})=>({initialUrl:null,previewUrl:null,error:null,allowOrigins:null,previewSearchParam:r.previewSearchParam,previewUrlSecret:null,previewAccessSharingCreatePermission:null,previewAccessSharingReadPermission:null,previewAccessSharingUpdatePermission:null,previewUrlSecretPermission:null,previewMode:null}),invoke:[{src:"check permission",input:()=>({checkPermissionName:"read",document:mt}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:te({previewAccessSharingReadPermission:({event:r})=>r.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"create",document:mt}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:te({previewAccessSharingCreatePermission:({event:r})=>r.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"update",document:mt}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:te({previewAccessSharingUpdatePermission:({event:r})=>r.snapshot.context??null})}},{src:"check permission",input:()=>({checkPermissionName:"create",document:ds}),onError:{target:".error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to check permission",error:r.error})}},onSnapshot:{actions:te({previewUrlSecretPermission:({event:r})=>r.snapshot.context??null})}}],on:{"set preview search param":{actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})}}},states:{checkingPermissions:{always:{guard:"has checked permissions",target:"resolvingInitialUrl"},tags:"busy"},resolvingInitialUrl:{invoke:{src:"resolve initial url",input:({context:r})=>({previewSearchParam:r.previewSearchParam}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve initial url",error:r.error})}},onDone:{target:"resolvingAllowPatterns",actions:te({initialUrl:({event:r})=>r.output})}},tags:"busy"},error:{type:"final",tags:"error"},resolvingAllowPatterns:{invoke:{src:"resolve allow patterns",input:({context:r})=>({initialUrl:r.initialUrl}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url allow patterns",error:r.error})}},onDone:{target:"resolvingUrlFromPreviewSearchParam",actions:te({allowOrigins:({event:r})=>r.output})}},tags:["busy"]},resolvingUrlFromPreviewSearchParam:{id:"loop",invoke:{src:"resolve url from preview search param",input:({context:r})=>({initialUrl:r.initialUrl,allowOrigins:r.allowOrigins,previewSearchParam:r.previewSearchParam}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url from search param",error:r.error})}},onDone:{target:"resolvingPreviewMode",actions:te({initialUrl:({event:r})=>r.output})}},tags:["busy"]},resolvingPreviewMode:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})},target:"#loop",reenter:!0}},invoke:{src:"resolve preview mode",input:({context:r})=>({targetOrigin:r.initialUrl.origin}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url allow patterns",error:r.error})}},onDone:[{guard:{type:"has preview mode with created secret",params:({event:r})=>r.output},actions:te({previewMode:({event:r})=>r.output}),target:"previewMode.createPreviewSecret"},{guard:{type:"has preview mode with share access",params:({event:r})=>r.output},actions:te({previewMode:({event:r})=>r.output}),target:"previewMode.readShareAccess"},{guard:{type:"has preview mode without permissions",params:({event:r})=>r.output},actions:[te({previewUrl:({context:r})=>r.initialUrl}),"notify preview will likely fail"],target:"success"},{actions:te({previewUrl:({context:r})=>r.initialUrl}),target:"success"}]},tags:["busy"]},success:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})},target:"#loop",reenter:!0}}},previewMode:{on:{"set preview search param":{guard:"search param has new origin",actions:{type:"assign preview search param",params:({event:r})=>({previewSearchParam:r.previewSearchParam})},target:"#loop",reenter:!0}},states:{createPreviewSecret:{invoke:{src:"create preview secret",onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to create preview secret",error:r.error})}},onDone:{target:"resolvePreviewUrl",actions:te({previewUrlSecret:({event:r})=>r.output})}},tags:["busy"]},readShareAccess:{invoke:{src:"read shared preview secret",onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to read shared preview secret",error:r.error})}},onDone:{target:"resolvePreviewUrl",actions:te({previewUrlSecret:({event:r})=>({secret:r.output,expiresAt:new Date(Date.now()+1e3*60*60*60*24)})})}},tags:["busy"]},resolvePreviewUrl:{invoke:{src:"resolve preview mode url",input:({context:r})=>({initialUrl:r.initialUrl,resolvedPreviewMode:r.previewMode,previewUrlSecret:r.previewUrlSecret.secret}),onError:{target:"error",actions:{type:"assign error",params:({event:r})=>({message:"Failed to resolve preview url",error:r.error})}},onDone:{target:"success",actions:te({previewUrl:({event:r})=>r.output})}},tags:["busy"]},error:{type:"final",tags:["error"]},success:{after:{expiredSecret:{guard:"can create preview secret",actions:te({previewUrlSecret:null}),target:"createPreviewSecret",reenter:!0}}}},initial:"readShareAccess"}},initial:"checkingPermissions"});function ms(r,e){var y,b,_;const t=W.c(24),i=Mr();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:st},t[0]=a):a=t[0];const n=rt(a),s=(y=Qt())==null?void 0:y.id,o=((_=(b=Jt())==null?void 0:b.activeWorkspace)==null?void 0:_.basePath)||"/",c=He();let u;t[1]!==c.state._searchParams?(u=new URLSearchParams(c.state._searchParams).get("preview"),t[1]=c.state._searchParams,t[2]=u):u=t[2];const m=u,{push:d}=nt(),{t:p}=ye(xe),h=_r();let x;if(t[3]!==e||t[4]!==n||t[5]!==s||t[6]!==i||t[7]!==h||t[8]!==r||t[9]!==d||t[10]!==o||t[11]!==p){let A;t[13]!==d||t[14]!==p?(A=()=>d({id:"preview-url-secret.missing-grants",closable:!0,status:"error",duration:1/0,title:p("preview-url-secret.missing-grants")}),t[13]=d,t[14]=p,t[15]=A):A=t[15];let j;t[16]!==i?(j=C=>{const{input:R}=C;return i.checkDocumentPermission(R.checkPermissionName,R.document)},t[16]=i,t[17]=j):j=t[17],x=ps.provide({actions:{"notify preview will likely fail":A},actors:{"create preview secret":is({client:n,currentUserId:s}),"read shared preview secret":as({client:n}),"resolve allow patterns":ss({client:n,allowOption:e}),"resolve initial url":os({client:n,studioBasePath:o,previewUrlOption:r,perspective:h}),"resolve preview mode":cs({client:n,previewUrlOption:r}),"resolve preview mode url":ls({client:n,studioBasePath:o,previewUrlOption:r,perspective:h}),"check permission":Zt(j)}}),t[3]=e,t[4]=n,t[5]=s,t[6]=i,t[7]=h,t[8]=r,t[9]=d,t[10]=o,t[11]=p,t[12]=x}else x=t[12];let w;t[18]!==m?(w={input:{previewSearchParam:m}},t[18]=m,t[19]=w):w=t[19];const v=er(x,w);let g,P;t[20]!==v||t[21]!==m?(g=()=>{v.send({type:"set preview search param",previewSearchParam:m})},P=[v,m],t[20]=v,t[21]=m,t[22]=g,t[23]=P):(g=t[22],P=t[23]),f.useEffect(g,P);const S=ee(v,hs);if(S)throw S;return v}function hs(r){return r.status==="error"?r.error:r.hasTag("error")?r.context.error:null}function fs(r){const e=W.c(9),{t}=ye(xe),{push:i}=nt(),a=He();let n;e[0]!==a.state._searchParams?(n=new URLSearchParams(a.state._searchParams).get("preview"),e[0]=a.state._searchParams,e[1]=n):n=e[1];const s=n,o=ee(r,gs),c=ee(r,vs);let u,m;e[2]!==o||e[3]!==c||e[4]!==s||e[5]!==i||e[6]!==t?(u=()=>{if(!Array.isArray(o)||!s||!c)return;const d=new URL(s,c).origin;o.some(p=>p.test(d))||i({closable:!0,id:`presentation-iframe-origin-mismatch-${d}`,status:"error",duration:1/0,title:t("preview-search-param.configuration.error.title"),description:l.jsx(Rt,{t,i18nKey:"preview-search-param.configuration.error.description",components:{Code:"code"},values:{previewSearchParam:s,blockedOrigin:d}})})},m=[o,c,s,i,t],e[2]=o,e[3]=c,e[4]=s,e[5]=i,e[6]=t,e[7]=u,e[8]=m):(u=e[7],m=e[8]),f.useEffect(u,m)}function vs(r){var e;return(e=r.context.previewUrl)==null?void 0:e.origin}function gs(r){return r.context.allowOrigins}function ws(){const r=W.c(7);let e;r[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:st},r[0]=e):e=r[0];const t=rt(e),[i,a]=f.useReducer(ys,"loading"),[n,s]=f.useState(null);let o,c;r[1]!==t?(o=()=>{const m=Yn(t,d=>{s(d),a()});return()=>m()},c=[t],r[1]=t,r[2]=o,r[3]=c):(o=r[2],c=r[3]),f.useEffect(o,c);let u;return r[4]!==i||r[5]!==n?(u=[n,i],r[4]=i,r[5]=n,r[6]=u):u=r[6],u}function ys(){return"ready"}function xs(r){var x,w;const e=W.c(8),{tool:t}=r,i=ms((x=t.options)==null?void 0:x.previewUrl,(w=t.options)==null?void 0:w.allowOrigins);fs(i);const a=ee(i,js),n=ee(i,_s),s=ee(i,Ss),o=ee(i,Ps),c=ee(i,bs),[u,m]=ws();if(!c||m==="loading"||!a||typeof a.granted>"u"||!n||typeof n.granted>"u"||!o||!s||typeof s.granted>"u"||typeof o.granted>"u"){let v;return e[0]===Symbol.for("react.memo_cache_sentinel")?(v=l.jsx(Xt,{}),e[0]=v):v=e[0],v}const d=(a==null?void 0:a.granted)===!0&&(n==null?void 0:n.granted)===!0,p=(s==null?void 0:s.granted)===!0;let h;return e[1]!==i||e[2]!==d||e[3]!==p||e[4]!==t||e[5]!==c||e[6]!==u?(h=l.jsx(ts,{tool:t,initialPreviewUrl:c,vercelProtectionBypass:u,canToggleSharePreviewAccess:d,canUseSharedPreviewAccess:p,previewUrlRef:i}),e[1]=i,e[2]=d,e[3]=p,e[4]=t,e[5]=c,e[6]=u,e[7]=h):h=e[7],h}function bs(r){return r.context.previewUrl}function Ps(r){return r.context.previewUrlSecretPermission}function Ss(r){return r.context.previewAccessSharingReadPermission}function _s(r){return r.context.previewAccessSharingUpdatePermission}function js(r){return r.context.previewAccessSharingCreatePermission}const Cs=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"}));export{Cs as P,ft as c};
